antora:
  extensions:
    - require: '@antora/lunr-extension'
      index_latest_only: true #index only latest version !
    - require: './extensions/load-global-vars.js'
      var_files: ['./resources/global-vars.yml']

site:
  title: openEHR Specifications (Local Build)
  url: http://localhost:8080
  start_page: BASE::index.adoc

content:
  sources:
    # Local sources for development - cloned repositories from ../repos/ directory relative to this playbook
    
    - url: repos/specifications-BASE
      branches: HEAD
      start_path: .
      version: development
    
    - url: repos/specifications-RM
      branches: HEAD
      start_path: .
      version: development

ui:
  bundle:
    url: https://gitlab.com/antora/antora-ui-default/-/jobs/artifacts/HEAD/raw/build/ui-bundle.zip?job=bundle-stable
    snapshot: true
  supplemental_files: ./supplemental-ui
  output_dir: _

asciidoc:
  attributes:
    page-pagination: true
    experimental: ''
    idprefix: '_'
    idseparator: '_'
    sectanchors: ''
    sectlinks: ''
    linkattrs: ''
    source-highlighter: rouge
    rouge-style: github
  extensions:
    - asciidoctor-kroki
    - '@asciidoctor/tabs'

runtime:
  fetch: true
  cache_dir: ./.cache/antora
  
output:
  dir: ./build
  clean: true

urls:
  html_extension_style: indexify
  latest_version_segment_strategy: redirect:to
  latest_version_segment: latest
  latest_prerelease_version_segment: development
