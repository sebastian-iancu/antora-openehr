antora:
  extensions:
    - require: '@antora/lunr-extension'
      index_latest_only: true
      index_by_heading: true
      snippet_length: 80
    - require: './extensions/load-global-vars.js'
      var_files: ['./resources/global-vars.yml']

site:
  title: openEHR Specifications
  url: https://specifications.openehr.org
  start_page: BASE::index.adoc
  keys:
    google_analytics: ''  # Add your GA key here if needed

content:
  sources:
    # BASE Component - Foundation specifications
    - url: https://github.com/openEHR/specifications-BASE
      branches: 
        - master
        - 'release/1.0.2'
        - 'release/1.0.3'
        - 'release/1.1.0'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # RM Component - Reference Model
    - url: https://github.com/openEHR/specifications-RM
      branches:
        - master
        - 'release/1.0.2'
        - 'release/1.0.3'
        - 'release/1.0.4'
        - 'release/1.1.0'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # AM Component - Archetype Model
    - url: https://github.com/openEHR/specifications-AM
      branches:
        - master
        - 'release/1.4.0'
        - 'release/2.0.6'
        - 'release/2.1.0'
        - 'release/2.2.0'
        - 'release/2.3.0'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # LANG Component - Languages (AQL, EL, ODIN, etc.)
    - url: https://github.com/openEHR/specifications-LANG
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # SM Component - Service Model
    - url: https://github.com/openEHR/specifications-SM
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # QUERY Component - Query specifications
    - url: https://github.com/openEHR/specifications-QUERY
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # PROC Component - Process/Task Planning
    - url: https://github.com/openEHR/specifications-PROC
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # CDS Component - Clinical Decision Support
    - url: https://github.com/openEHR/specifications-CDS
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # CNF Component - Conformance
    - url: https://github.com/openEHR/specifications-CNF
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development
    
    # ITS Component - Implementation Technology Specifications
    - url: https://github.com/openEHR/specifications-ITS
      branches:
        - master
        - 'release/*'
      version:
        release/(?<version>+({0..9}).+({0..9}).+({0..9})): Release-$<version>
        master: development

ui:
  bundle:
    url: https://gitlab.com/antora/antora-ui-default/-/jobs/artifacts/HEAD/raw/build/ui-bundle.zip?job=bundle-stable
    snapshot: true
  supplemental_files: ./supplemental-ui
  output_dir: _

asciidoc:
  attributes:
    # Global attributes (migrated from AA_GLOBAL)
    page-pagination: true
    experimental: ''
    idprefix: '_'
    idseparator: '_'
    sectanchors: ''
    sectlinks: ''
    linkattrs: ''
    source-highlighter: rouge
    rouge-style: github
  extensions:
    - asciidoctor-kroki
    - '@asciidoctor/core'

runtime:
  fetch: true
  cache_dir: ./.cache/antora
  
output:
  dir: ./build
  clean: true

# URLs and redirects configuration
urls:
  html_extension_style: indexify
  latest_version_segment_strategy: redirect:to
  latest_version_segment: latest
  redirect_facility: nginx
  latest_prerelease_version_segment: development
