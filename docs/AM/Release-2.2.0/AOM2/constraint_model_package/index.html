<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <title>Constraint Model Package :: openEHR Specifications (Local Build)</title>
    <link rel="canonical" href="https://sebastian-iancu.github.io/antora-openehr/AM/Release-2.2.0/AOM2/constraint_model_package/">
    <link rel="prev" href="../archetype_package/">
    <link rel="next" href="../rules_package/">
    <meta name="description" content="openEHR Archetype Object Model 2 (AOM2) (ISO 13606-2:2019)">
    <meta name="keywords" content="EHR, ADL, AOM, health records, archetypes, constraint language, ISO 13606, openehr">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../../ui/css/site.css">
    <link rel="stylesheet" href="../../../../ui/css/antora-openehr.css">
    <link rel="stylesheet" href="../../../../ui/css/openehr.css">
<link rel="icon" href="../../../../ui/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://sebastian-iancu.github.io/antora-openehr">openEHR Specifications (Local Build)</a>

      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:AM"> Archetype Model only
          </label>
        </div>
      </div>

      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Specifications</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://specifications.openehr.org/" target="_blank">
              openEHR specification
            </a>
            <a class="navbar-item" href="https://specifications.openehr.org/releases/UML/development/index.html" target="_blank">
              openEHR portal
            </a>
            <a class="navbar-item" href="https://ckm.openehr.org/ckm/" target="_blank">
              openEHR CKM
            </a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://openehr.atlassian.net/secure/Dashboard.jspa?selectPageId=10190" target="_blank">
              Issue trackers
            </a>
            <a class="navbar-item" href="https://discourse.openehr.org/" target="_blank">
              Discourse Forum
            </a>
            <a class="navbar-item" href="https://specifications.openehr.org/wiki/display/spec/Specifications+Home" target="_blank">
              Wiki
            </a>
            <a class="navbar-item" href="https://github.com/openEHR" target="_blank">
              GitHub
            </a>
          </div>
        </div>

      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="AM" data-version="Release-2.2.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../">Archetype Model</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../ADL1.4/">Archetype Definition Language 1.4 (ADL1.4)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/file_encoding/">File Encoding and Character Quoting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/dadl/">dADL - Data ADL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/cadl/">cADL - Constraint ADL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/assertions/">Assertions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/paths/">ADL Paths</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/adl/">ADL - Archetype Definition Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/customising_adl/">Customising ADL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/other_formalisms/">Relationship of ADL to Other Formalisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/extended_metadata/">Extended Meta-data Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/syntax_spec/">Syntax Specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL1.4/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../ADL2/">Archetype Definition Language 2 (ADL2)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/file_encoding/">File Encoding and Character Quoting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/cadl/">cADL - Constraint ADL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/paths/">ADL Paths</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/default_values/">Default Values</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/adl/">ADL - Archetype Definition Language</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/terminology_integration/">Terminology Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/specialisation/">Specialisation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/templates/">Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/other_formalisms/">Relationship of ADL to Other Formalisms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/syntax_spec/">Syntax Specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../ADL2/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../AOM1.4/">Archetype Object Model 1.4 (AOM1.4)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/model_overview/">The Archetype Object Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/archetype_package/">The Archetype Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/constraint_model_package/">Constraint Model Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/assertion_package/">The Assertion Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/primitive_package/">Primitive Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/ontology_package/">Terminology Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/domain_extension/">Domain-specific Extension Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/diverse_reference_models/">Using Archetypes with Diverse Reference Models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/rm_dependencies/">Reference Model Dependencies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../AOM1.4/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Archetype Object Model 2 (AOM2)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../model_overview/">Model Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../archetype_package/">The Archetype Package</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Constraint Model Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rules_package/">The Rules Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rm_overlay/">The RM Overlay Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../terminology_package/">Terminology Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../validation/">Validation and Transformation Semantics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../serialisation_model/">Serialisation Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../templates/">Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../rm_adaptation/">Reference Model Adaptation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Identification/">Archetype Identification</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/artefact_source_id/">Source Artefact Identification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/versioning/">Versioning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/lifecycle_mgt/">Lifecycle Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/distributed_governance/">Distributed Governance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/referencing/">Referencing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/uris/">A Reliable URI for Knowledge Resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/artefact_authentication/">Artefact Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/scenarios/">Scenarios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Identification/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#index.adoc">Language Design</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../OPT2/">Operational Template 2 (OPT2)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/opt_raw/">The Raw Operational Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/opt_profiled/">The Profiled Operational Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/file_formats/">File Formats</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../OPT2/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Overview/">Archetype Technology Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/introduction/">Business Purpose of Archetypes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/formalism_overview/">Archetype Formalism Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/the_specifications/">The Specifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/semantic_overview/">Semantic Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/artefacts/">Artefacts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../Overview/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Archetype Model</span>
    <span class="version">Release-2.2.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../../latest/">Archetype Model</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../latest/">Release-2.3.0</a>
        </li>
        <li class="version is-current">
          <a href="../../">Release-2.2.0</a>
        </li>
        <li class="version">
          <a href="../../../development/">development</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../BASE/latest/">Base Model</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../BASE/latest/">Release-1.2.0</a>
        </li>
        <li class="version">
          <a href="../../../../BASE/Release-1.1.0/">Release-1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../BASE/development/">development</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../RM/latest/">Reference Model</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../RM/latest/">Release-1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../RM/Release-1.0.4/">Release-1.0.4</a>
        </li>
        <li class="version">
          <a href="../../../../RM/development/">development</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../BASE/latest/" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Archetype Model</a></li>
    <li><a href="../">Archetype Object Model 2 (AOM2)</a></li>
    <li><a href="./">Constraint Model Package</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">Release-2.2.0</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../latest/">Release-2.3.0</a>
    <a class="version is-current" href="./">Release-2.2.0</a>
    <a class="version is-missing" href="../../../development/">development</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Constraint Model Package</h1>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a><a class="link" href="#_overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#constraint_model_top">am.aom2.constraint_model Package</a> and <a href="#constraint_model_bottom">am.aom2.primitive Package</a> illustrate the object model of constraints used in an archetype definition. This model is completely generic, and is designed to express the semantics of constraints on instances of classes which are themselves described in any orthodox object-oriented formalism, such as UML. Accordingly, the major abstractions in this model correspond to major abstractions in object-oriented formalisms, including several variations of the notion of 'object' and the notion of 'attribute'. The notion of 'object' rather than 'class' or 'type' is used because archetypes are about constraints on data (i.e. 'instances', or 'objects') rather than models, which are constructed from 'classes'. In this document, the word 'attribute' refers to any data property of a class, regardless of whether regarded as a 'relationship' (i.e. association, aggregation, or composition) or 'primitive' (i.e. value) attribute in an object model.</p>
</div>
<div id="constraint_model_top" class="imageblock text-center text-center">
<div class="content">
<img src="../../_images/uml/AM-aom2.constraint_model-top.svg" alt="AM aom2.constraint model top">
</div>
<div class="title">Figure 1. am.aom2.constraint_model Package</div>
</div>
<div class="paragraph">
<p>The definition part of an archetype is an instance of a <code>C_COMPLEX_OBJECT</code> and consists of alternate layers of object and attribute constrainer nodes, each containing the next level of nodes. At the leaves are primitive object constrainer nodes constraining primitive types such as <code>String</code> , <code>Integer</code> etc. There are also nodes that represent internal references to other nodes, constraint reference nodes that refer to a text constraint in the constraint binding part of the archetype terminology, and archetype constraint nodes, which represent constraints on other archetypes allowed to appear at a given point. The full list of concrete node types is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>C_COMPLEX_OBJECT</code> : any interior node representing a constraint on instances of some non-primitive type, e.g. <code>OBSERVATION</code> , <code>SECTION</code> ;</p>
</li>
<li>
<p><code>C_ATTRIBUTE</code> : a node representing a constraint on an attribute (i.e. UML 'relationship' or 'primitive attribute') in an object type;</p>
</li>
<li>
<p><code>C_PRIMITIVE_OBJECT</code> : a node representing a constraint on a primitive (built-in) object type;</p>
</li>
<li>
<p><code>C_COMPLEX_OBJECT_PROXY</code> : a node that refers to a previously defined <code>C_COMPLEX_OBJECT</code> node in the same archetype. The reference is made using a path;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> : a node whose statements define a constraint that determines which other archetypes can appear at that point in the current archetype. It can be thought of like a keyhole, into which few or many keys might fit, depending on how specific its shape is. Logically it has the same semantics as a <code>C_COMPLEX_OBJECT</code> , except that the constraints are expressed in another archetype, not the current one.</p>
</li>
<li>
<p><code>C_ARCHETYPE_ROOT</code> : stands for the root node of an archetype; enables another archetype to be referenced from the present one. Used in both archetypes and templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The constraints define which configurations of reference model class instances are considered to conform to the archetype. For example, certain configurations of the classes <code>PARTY</code> , <code>ADDRESS</code> , <code>CLUSTER</code> and <code>ELEMENT</code> might be defined by a Person archetype as allowable structures for 'people with identity, contacts, and addresses'. Because the constraints allow optionality, cardinality and other choices, a given archetype usually corresponds to a set of similar configurations of objects.</p>
</div>
<div id="constraint_model_bottom" class="imageblock text-center text-center">
<div class="content">
<img src="../../_images/uml/AM-aom2.constraint_model-bottom.svg" alt="AM aom2.constraint model bottom">
</div>
<div class="title">Figure 2. am.aom2.primitive Package</div>
</div>
<div class="paragraph">
<p>The type-name nomenclature <code>C_XXX</code> used here is intended to be read as "constraint on objects of type <code>XXXX</code> ", i.e. a <code>C_COMPLEX_OBJECT</code> is a "constraint on a complex object (defined by a complex reference model type)". These type names are used below in the formal model.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_semantics"><a class="anchor" href="#_semantics"></a><a class="link" href="#_semantics">Semantics</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The effect of the model is to create archetype definition structures that are a hierarchical alternation of object and attribute constraints. This structure can be seen by inspecting an ADL archetype, or by viewing an archetype in an AOM-based tool such as the openEHR <a href="https://www.openehr.org/downloads/ADLworkbench" target="_blank" rel="noopener">ADL workbench</a>, and is a direct consequence of the object-oriented principle that classes consist of properties, which in turn have types that are classes. (To be completely correct, types do not always correspond to classes in an object model, but it does not make any difference here). The repeated object/attribute hierarchical structure of an archetype provides the basis for using paths to reference any node in an archetype. Archetype paths follow a syntax that is a directly convertible in and out of the W3C Xpath syntax.</p>
</div>
<div class="sect2">
<h3 id="_all_node_types"><a class="anchor" href="#_all_node_types"></a><a class="link" href="#_all_node_types">All Node Types</a></h3>
<div class="paragraph">
<p>Some properties are defined for all node types, described in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_path_functions"><a class="anchor" href="#_path_functions"></a><a class="link" href="#_path_functions">Path Functions</a></h4>
<div class="paragraph">
<p>The path feature computes the path to the current node from the root of the archetype, while the has_path function indicates whether a given path can be found in an archetype.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conformance_functions"><a class="anchor" href="#_conformance_functions"></a><a class="link" href="#_conformance_functions">Conformance Functions</a></h4>
<div class="paragraph">
<p>All node types include two functions that formalise the notion of conformance of a specialised archetype to a parent archetype. Both functions take an argument which must be a corresponding node in a parent archetype, not necessarily the immediate parent. A 'corresponding' node is one found at the same or a congruent path. A congruent path is one in which one or more at-codes have been redefined in the specialised archetype.</p>
</div>
<div class="paragraph">
<p>The <code><em>c_conforms_to</em></code> function returns True if the node on which it is called is a valid specialisation of the 'other' node. The <code><em>c_congruent_to</em></code> function returns True if the node on which it is called is the same as the other node, with the possible exception of a redefined at-code. The latter may happen due to the need to restrict the domain meaning of node to a meaning narrower than that of the same node in the parent. The formal semantics of both functions are given in the class definitions, <a href="#_class_definitions_2">[_class_definitions_2]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_any_allowed"><a class="anchor" href="#_any_allowed"></a><a class="link" href="#_any_allowed">Any_allowed</a></h4>
<div class="paragraph">
<p>The <code><em>any_allowed</em></code> function defined on some node types indicates that any value permitted by the reference model for the attribute or type in question is allowed by the archetype; its use permits the logical idea of a completely "open" constraint to be simply expressed, avoiding the need for any further substructure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attribute_nodes"><a class="anchor" href="#_attribute_nodes"></a><a class="link" href="#_attribute_nodes">Attribute Nodes</a></h3>
<div class="paragraph">
<p>Constraints on reference model attributes, including computed attributes (represented by functions with no aguments in most programming languages), are represented by instances of <code>C_ATTRIBUTE</code> . The expressible constraints include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>is_multiple</em></code>: a flag that indicates whether the <code>C_ATTRIBUTE</code> is constraining a multiply-valued (i.e. container) RM attribute or a single-valued one;</p>
</li>
<li>
<p><code><em>existence</em></code>: whether the corresponding instance (defined by the <code><em>rm_attribute_name</em></code> attribute) must exist;</p>
</li>
<li>
<p>child objects: representing allowable values of the object value(s) of the attribute.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the case of single-valued attributes (such as Person.date_of_birth) the children represent one or more alternative object constraints for the attribute value.</p>
</div>
<div class="paragraph">
<p>For multiply-valued attributes (such as <code>Person</code>.<code><em>contacts</em></code>: <code>List&lt;Contact&gt;</code>), a cardinality constraint on the container can be defined. The constraint on child objects is essentially the same except that more than one of the alternatives can co-exist in the data. <a href="#c_attributes">C_ATTRIBUTE variants</a> illustrates the two possibilities.</p>
</div>
<div class="paragraph">
<p>The appearance of both <code><em>existence</em></code> and <code><em>cardinality</em></code> constraints in <code>C_ATTRIBUTE</code> deserves some explanation, especially as the meanings of these notions are often confused in object-oriented literature. An existence constraint indicates whether an object will be found in a given attribute field, while a cardinality constraint indicates what the valid membership of a container object is. <code><em>Cardinality</em></code> is only required for container objects such as <code>List&lt;T&gt;</code> , <code>Set&lt;T&gt;</code> and so on, whereas <code><em>existence</em></code> is always possible. If both are used, the meaning is as follows: the existence constraint says whether the container object will be there (at all), while the cardinality constraint says how many items must be in the container, and whether it acts logically as a list, set or bag. Both existence and cardinality are optional in the model, since they are only needed to override the settings from the reference model.</p>
</div>
<div id="c_attributes" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/c_attributes.png" alt="c attributes" width="70%">
</div>
<div class="title">Figure 3. C_ATTRIBUTE variants</div>
</div>
</div>
<div class="sect2">
<h3 id="_object_node_types"><a class="anchor" href="#_object_node_types"></a><a class="link" href="#_object_node_types">Object Node Types</a></h3>
<div class="paragraph">
<p>The following sections apply to all object nodes in an archetype, i.e. instances of any descendant of <code>C_OBJECT</code>.</p>
</div>
<div class="sect3">
<h4 id="_rm_type_name_and_reference_model_type_matching"><a class="anchor" href="#_rm_type_name_and_reference_model_type_matching"></a><a class="link" href="#_rm_type_name_and_reference_model_type_matching">Rm_type_name and Reference Model Type Matching</a></h4>
<div class="paragraph">
<p>Every object node has an <code><em>rm_type_name</em></code> attribute that states the RM type to be matched by that node in the archetype. The value of <code><em>rm_type_name</em></code> is understood as a constraint on the dynamic type of data <em>instances</em> of the stated Reference Model type. It is either a class name from the RM, or a generic type constructed from RM class names, as described in the <a href="https://specifications.openehr.org/releases/AM/latest/ADL2.html#_reference_model_type_matching" target="_blank" rel="noopener">Reference model type matching</a> section of the ADL2 specification.</p>
</div>
<div class="paragraph">
<p>The RM type stated in an archetype object node is understood to be a <em>static</em> type constraint. Accordingly, it will match an instance of any RM <em>subtype</em> of the stated type, as long as the inheritance relationship is stated in the RM definition. This holds both for sub-classes, and subtypes of generic types, in a covariant fashion. The following matching will thus succeed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>rm_type_name</em></code> = <code>"PARTY"</code> matches <code>PERSON</code>, where <code>PERSON</code> inherits from <code>PARTY</code> in the relevant RM;</p>
</li>
<li>
<p><code><em>rm_type_name</em></code> = <code>"Interval&lt;Ordered&gt;"</code> matches a dynamic type of data items of <code>Interval&lt;Quantity&gt;</code>, <code>SimpleInterval&lt;Ordered&gt;</code> and <code>SimpleInterval&lt;Quantity&gt;</code> where <code>Quantity</code> inherits from <code>Ordered</code> and <code>SimpleInterval</code> inherits from <code>Interval</code> in the relevant RM.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are some special rules that apply to primitive type matching that enable 'logical' primitive type names in archetypes to match multiple 'concrete' variants that occur in some reference models and programming type systems. These are described in detail below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_node_id_and_paths"><a class="anchor" href="#_node_id_and_paths"></a><a class="link" href="#_node_id_and_paths">Node_id and Paths</a></h4>
<div class="paragraph">
<p>The <code><em>node_id</em></code> attribute in the class <code>C_OBJECT</code>, inherited by all subtypes, is of key importance in the archetype constraint model. It has two functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it allows archetype object constraint nodes to be individually identified, and in particular, guarantees sibling node unique identification;</p>
</li>
<li>
<p>it provides a code to which a human-understanding terminology definition can be attached, as well as potentially a terminology binding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The existence of <code><em>node_ids</em></code> in an archetype allows archetype paths to be created, which refer to each node. Every node in the archetype needs a <code><em>node_id</em></code> , but only node_ids for nodes under container attributes must have a terminology definition. For nodes under single-valued attributes, the terminology definition is optional (and typically not supplied), since the meaning is given by the reference model attribute definition.</p>
</div>
<div class="paragraph">
<p>Note that instances of <code>C_PRIMITIVE_OBJECT</code> have a constant <code><em>node_id</em></code> (see below) and thus do not require node identifiers to be supplied in syntax or serial forms that are converted to AOM structural form.</p>
</div>
</div>
<div class="sect3">
<h4 id="_sibling_ordering"><a class="anchor" href="#_sibling_ordering"></a><a class="link" href="#_sibling_ordering">Sibling Ordering</a></h4>
<div class="paragraph">
<p>Within a specialised archetype, redefined or added object nodes may be defined under a container attribute. Since specialised archetypes are in differential form, i.e. only redefined or added nodes are expressed, not nodes inherited unchanged, the relative ordering of siblings can&#8217;t be stated simply by the ordering of such items within the relevant list within the differential form of the archetype. An explicit ordering indicator is required if indeed order is specific. The <code>C_OBJECT.<em>sibling_order</em></code> attribute provides this capability. It can only be set on a <code>C_OBJECT</code> descendant within a multiply-valued attribute, i.e. an instance of <code>C_ATTRIBUTE</code> for which the <code><em>cardinality</em></code> is ordered.</p>
</div>
</div>
<div class="sect3">
<h4 id="_node_deprecation"><a class="anchor" href="#_node_deprecation"></a><a class="link" href="#_node_deprecation">Node Deprecation</a></h4>
<div class="paragraph">
<p>It is possible to mark an instance of any defined node type as deprecated, meaning that by preference it should not be used, and that there is an alternative solution for recording the same information. Rules or recommendations for how deprecation should be handled are outside the scope of the archetype proper, and should be provided by the governance framework under which the archetype is managed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reference_objects"><a class="anchor" href="#_reference_objects"></a><a class="link" href="#_reference_objects">Reference Objects</a></h3>
<div class="paragraph">
<p>Two subtypes of <code>C_OBJECT</code>, namely <code>ARCHETYPE_SLOT</code> and <code>C_COMPLEX_OBJECT_PROXY</code> are used to express constraints in the form of references to other constraints, rather than directly.</p>
</div>
<div class="paragraph">
<p>An <code>ARCHETYPE_SLOT</code> defines a 'slot' specifying other archetypes that can be plugged in at that point, in terms of constraints on archetype identifiers. These are expressed as instances of the <code>ARCHETYPE_ID_CONSTRAINT</code> class, a specialised version of the ELOM <code>EL_CONSTRAINT_EXPRESSION</code> class.</p>
</div>
<div class="paragraph">
<p>The type <code>C_COMPLEX_OBJECT_PROXY</code> represents a reference to another part of the current archetype that expresses exactly the same constraints needed at the  point where the proxy appears.</p>
</div>
</div>
<div class="sect2">
<h3 id="_defined_object_nodes_c_defined_object"><a class="anchor" href="#_defined_object_nodes_c_defined_object"></a><a class="link" href="#_defined_object_nodes_c_defined_object">Defined Object Nodes (C_DEFINED_OBJECT)</a></h3>
<div class="paragraph">
<p>The <code>C_DEFINED_OBJECT</code> subtype corresponds to the category of <code>C_OBJECTs</code> that are defined in an archetype by value, i.e. by inline definition. Four properties characterise <code>C_DEFINED_OBJECTs</code> as follows.</p>
</div>
<div class="sect3">
<h4 id="_valid_value"><a class="anchor" href="#_valid_value"></a><a class="link" href="#_valid_value">Valid_value</a></h4>
<div class="paragraph">
<p>The <code><em>valid_value</em></code> function tests a reference model object for conformance to the archetype. It is designed for recursive implementation in which a call to the function at the top of the archetype definition would cause a cascade of calls down the tree. This function is the key function of an 'archetype-enabled kernel' component that can perform runtime data validation based on an archetype definition.</p>
</div>
</div>
<div class="sect3">
<h4 id="_prototype_value"><a class="anchor" href="#_prototype_value"></a><a class="link" href="#_prototype_value">Prototype_value</a></h4>
<div class="paragraph">
<p>This function is used to generate a reasonable default value of the reference object being constrained by a given node. This allows archteype-based software to build a 'prototype' object from an archetype which can serve as the initial version of the object being constrained, assuming it is being created new by user activity (e.g. via a GUI application). Implementation of this function will usually involve use of reflection libraries or similar.</p>
</div>
</div>
<div class="sect3">
<h4 id="_default_value"><a class="anchor" href="#_default_value"></a><a class="link" href="#_default_value">Default_value</a></h4>
<div class="paragraph">
<p>This attribute allows a user-specified default value to be defined within an archetype. The <code><em>default_value</em></code> object must be of the same type as defined by the <code><em>prototype_value</em></code> function, pass the <code><em>valid_value</em></code> test. Where defined, the <code><em>prototype_value</em></code> function would return this value instead of a synthesised value.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_complex_objects_c_complex_object"><a class="anchor" href="#_complex_objects_c_complex_object"></a><a class="link" href="#_complex_objects_c_complex_object">Complex Objects (C_COMPLEX_OBJECT)</a></h3>
<div class="paragraph">
<p>Along with <code>C_ATTRIBUTE</code>, <code>C_COMPLEX_OBJECT</code> is the key structuring type of the <code>constraint_model</code> package, and consists of attributes of type <code>C_ATTRIBUTE</code>, which are constraints on the attributes (i.e. any property, including relationships) of the reference model type. Accordingly, each <code>C_ATTRIBUTE</code> records the name of the constrained attribute (in <code><em>rm_attr_name</em></code>) , the existence and cardinality expressed by the constraint (depending on whether the attribute it constrains is a multiple or single relationship), and the constraint on the object to which this <code>C_ATTRIBUTE</code> refers via its <code><em>children</em></code> attribute (according to its reference model) in the form of further <code>C_OBJECTs</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_primitive_types_c_primitive_object_descendants"><a class="anchor" href="#_primitive_types_c_primitive_object_descendants"></a><a class="link" href="#_primitive_types_c_primitive_object_descendants">Primitive Types (C_PRIMITIVE_OBJECT descendants)</a></h3>
<div class="paragraph">
<p>Constraints on primitive types are defined by the descendants of <code>C_PRIMITIVE_OBJECT</code>, i.e. <code>C_STRING</code> , <code>C_INTEGER</code> and so on. The primitive constraint types are represented in such a way as to accommodate both 'tuple' constraints and logically unary constraints, using a tuple array (<code>C_PRIMITIVE_TUPLE.<em>members</em></code>) whose members are each a primitive constraint corresponding to each primitive type in the tuple. Tuple constraints are second order constraints, described below, enabling covarying constraints to be stated. In the unary case, the constraint is the first member of a tuple array.</p>
</div>
<div class="paragraph">
<p><code>C_PRIMITIVE_OBJECT</code> instances represented in <a href="https://specifications.openehr.org/releases/AM/latest/ADL2.html" target="_blank" rel="noopener">ADL 'short' form</a> are created with a fixed id-code <code>ADL_CODE_DEFINITIONS.<em>primitive_node_id</em></code> as the value of <code><em>node_id</em></code> (see <a href="#ADL_CODE_DEFINITIONS Class">[ADL_CODE_DEFINITIONS Class]</a>). For regularly structured <code>C_PRIMITIVE_OBJECT</code> instances, a normal node identifier is required.</p>
</div>
<div class="paragraph">
<p>The primitive constraint for each primitive type may itself be complex. Its formal type is the type of the <code><em>constraint</em></code> accessor in each <code>C_PRIMITIVE_OBJECT</code> descendant. The use of the constrainer types for each RM type is summarised in the following table.</p>
</div>
<table id="primitive-types" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">RM Primitive type</th>
<th class="tableblock halign-left valign-top">AOM type</th>
<th class="tableblock halign-left valign-top">AOM Primitive constrainer type</th>
<th class="tableblock halign-left valign-top">Constraint description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_BOOLEAN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Boolean&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or two Boolean values, enabling the logical constraints
                                                                                'true', 'false' and 'true or false' to be expressed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_STRING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;String&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of possible string values, which may include regular expressions,
                                                                                which are delimited by '/' characters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Terminology_code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_TERMINOLOGY_CODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminology constraint -<br>
                                                <code>[acN]</code> or <code>[atN]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string containing either a single at-code or a single ac-code. In the
                                                                                latter case, the constraint refers to either a locally defined value set
                                                                                or (via a binding) an external value set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descendants of<br>
 <code>Ordered</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_ORDERED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;T&#8594;Ordered&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A single value (which is a point interval), a list of values
                                                                                (list of point intervals), a list of intervals, which may be mixed proper
                                                                                and point intervals.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_INTEGER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Integer&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_REAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Real&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Ordered type, with T = <code>Real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descendants of<br>
<code>Temporal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_TEMPORAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;T&#8594;Temporal&gt;&gt;</code><br>
                                                OR<br>
                                                <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for ordered types, with T being an sub-type type of <code>Temporal</code>, an
                                                                                ancestor of the assumed Date/time primitive types., with the addition of a
                                                                                second type constraint -                                                                                                                             <a href="https://specifications.openehr.org/releases/AM/latest/ADL2.html#_constraints_on_dates_times_and_durations" target="_blank" rel="noopener">a pattern based on ISO8601 syntax</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Date&gt;&gt;</code><br>
                                                OR<br>
                                                <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>Date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Time&gt;&gt;</code><br>
                                                OR<br>
                                                <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>Time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_DATE_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Date_time&gt;&gt;</code><br>
                                                OR<br>
                                                 <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>Date_time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List &lt;Interval&lt;Duration&gt;&gt;</code><br>
                                                OR<br>
                                                <code>String</code> (ADL pattern)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As for Temporal types with T = <code>Duration</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;T&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_PRIMITIVE_OBJECT</code><br>
                       descendant appropriate<br>
                       to RM type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;T&gt;</code> or <code>List&lt;Interval&lt;T&gt;&gt;</code><br>
                                                for Ordered types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Members of List value match any value in constraint list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Interval&lt;T&#8594;Ordered&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C_PRIMITIVE_ORDERED</code><br>
                       descendant appropriate<br>
                       to RM type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List&lt;Interval&lt;T&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval value matches any (Interval) value in constraint list</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The RM primitive types listed above are assumed to exist (possibly with different names) within any RM used as the basis for creating archetypes. Where any do not exist - e.g. if there are no date/time types in a particular RM - no archetype constraints can be defined for such nodes. Where the types have different names, name mapping can be performed as described in <a href="#RM Primitive Type Equivalences">[RM Primitive Type Equivalences]</a> below.</p>
</div>
<div class="paragraph">
<p>This facility can be used to effect the following mappings from <code>C_PRIMITIVE_OBJECT</code> descendants (<code>C_STRING</code>, <code>C_INTEGER</code> etc) to the types found in any particular RM.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String</code> variants: in addition to matching <code>String</code>, <code>C_STRING</code> should match <code>StringN</code> and <code>String_N</code> instances, to accommodate RM types such as <code>String8</code>, <code>String_32</code> etc;</p>
</li>
<li>
<p><code>Integer</code> variants: in addition to matching <code>Integer</code>, <code>C_INTEGER</code> should match <code>IntegerN</code> and <code>Integer_N</code>, to accommodate RM types such as <code>Integer_16</code>, <code>Integer64</code> etc;</p>
</li>
<li>
<p><code>Real</code> variants: in addition to matching <code>Real</code>, <code>C_REAL</code> should match <code>RealN</code> and <code>Real_N</code> and <code>Double</code>, to accommodate RM types such as <code>Real_32</code>, <code>Real64</code> and <code>Double</code>;</p>
</li>
<li>
<p><code>Date_time</code> variants: typical names for <code>Date_time</code> such as <code>DateTime</code>, <code>TimeStamp</code> etc should be mapped to <code>C_DATE</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_assumed_value"><a class="anchor" href="#_assumed_value"></a><a class="link" href="#_assumed_value">Assumed_value</a></h4>
<div class="paragraph">
<p>The <code><em>assumed_value</em></code> attribute is useful for archetypes containing any optional constraint. and provides an ability to define a value that can be assumed for a data item for which no data is found at execution time. If populated, it can contain a single at-code that must be in the local value set referred to by the ac-code in the <code><em>constraint</em></code> attribute.</p>
</div>
<div class="paragraph">
<p>For example, an archetype for the concept 'blood pressure measurement' might contain an optional protocol section containing a data point for patient position, with choices 'lying', 'sitting' and 'standing'. Since the section is optional, data could be created according to the archetype which does not contain the protocol section. However, a blood pressure cannot be taken without the patient in some position, so clearly there is an implied value for patient position. Amongst clinicians, basic assumptions are nearly always made for such things: in general practice, the position could always safely be assumed to be 'sitting' if not otherwise stated; in the hospital setting, 'lying' would be the normal assumption. The <code><em>assumed_value</em></code> feature of archetypes allows such assumptions to be explicitly stated so that all users/systems know what value to assume when optional items are not included in the data.</p>
</div>
<div class="paragraph">
<p>Note that the notion of assumed values is distinct from that of 'default values'. The latter notion is that of a default 'pre-filled' value that is provided (normally in a local context by a template) for a data item that is to be filled in by the user, but which is typically the same in many cases. Default values are thus simply an efficiency mechanism for users. As a result, default values do appear in data, while assumed values don&#8217;t.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_terminology_constraints_c_terminology_code"><a class="anchor" href="#_terminology_constraints_c_terminology_code"></a><a class="link" href="#_terminology_constraints_c_terminology_code">Terminology Constraints (C_TERMINOLOGY_CODE)</a></h3>
<div class="paragraph">
<p>The <code>C_TERMINOLOGY_CODE</code> type entails some complexity and merits further explanation. This is the only constrainer type whose constraint semantics are not self-contained, but located in the archetype terminology and/or in external terminologies.</p>
</div>
<div class="paragraph">
<p>A <code>C_TERMINOLOGY_CODE</code> instance in an archetype is simple: it can only be one of the following constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a single ac-code, referring to either a value-set defined in the archetype terminology or bound to an external value set or ref set;</p>
<div class="ulist">
<ul>
<li>
<p>in this case, an additional at-code may be included as an assumed value; the at-code must come from the locally defined value set;</p>
</li>
</ul>
</div>
</li>
<li>
<p>a single at-code, repesenting a single possible value.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The second case in theory could be done using an ac-code referring to a value set containing a single value, but there seems little value in this extra verbiage, and little cost in providing the single-member value set short cut.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, a <code>C_TERMINOLOGY_CODE</code> instance can reconstitute the internal value set via access to the archetype terminology (this has to be set up within the implementation). If bindings are evaluated, the external form of a value set can potentially be obtained as well. The utility of this is to be able to evaluate and cache certain external 'ref sets' when evaluating the Operational Template.</p>
</div>
<div class="sect3">
<h4 id="_terminology_code_resolution"><a class="anchor" href="#_terminology_code_resolution"></a><a class="link" href="#_terminology_code_resolution">Terminology Code Resolution</a></h4>
<div class="paragraph">
<p>When an archetype is deployed in the form of an operational template, the internally defined value sets, and any bindings are processed in stages in order to obtain the final terminology codes from which the user should choose. The <code>C_TERMINOLOGY_CODE</code> class provides a number of functions to formalise this as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>value_set_expanded</em>: List&lt;String&gt;</code>: this function converts an ac-code to its corresponding set of at-codes, as defined in the <code>value_sets</code> section of the archetype.</p>
</li>
<li>
<p><code><em>value_set_substituted</em>: List&lt;URI&gt;</code>: where bindings exist to he value set at-codes, this function converts each code to its corresponding binding target, i.e. a URI.</p>
</li>
<li>
<p><code><em>value_set_resolved</em>: List&lt;TERMINOLOGY_CODE&gt;</code>: this function converts the list of URIs to final terms, including with textual rubrics, i.e. a list of <code>TERMINOLOGY_CODEs</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These functions would normally be implemented as 'lambdas' or 'agents', in order to obtain access to the target terminologies.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since an archetype might not contain external terminology bindings for all (or even any) of its terminological constraints, a 'resolved' archetype will usually contain at-codes in its cADL definition. These at-codes would be treated as real coded terms in any implementation that was creating data, and as a consequence, archetype at-codes could occur in real data, as described in the the Terminology Integration section of the ADL specification.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_constraints_on_enumeration_types"><a class="anchor" href="#_constraints_on_enumeration_types"></a><a class="link" href="#_constraints_on_enumeration_types">Constraints on Enumeration Types</a></h3>
<div class="paragraph">
<p>Enumeration types in the reference model are assumed to have semantics expected in UML, and mainstream programming languages, i.e. to be a distinct type based on a primitive type, normally Integer or String. Each such type consists of a set of values from the domain of its underlying type, thus, a set of Integer, String or other primitive values. Each of these values is assumed to be named in the manner of a symbolic constant. Although stricly speaking UML doesn&#8217;t require an enumerated type to be based on an underlying primitive type, programming languages do, hence the assumption here that values from the domain of such a type are involved.</p>
</div>
<div class="paragraph">
<p>A constraint on an enumerated type therefore consists of an AOM instance of a <code>C_PRIMITIVE</code> descendant, almost always <code>C_INTEGER</code> or <code>C_STRING</code> . The flag <code><em>is_enumerated_type_constraint</em></code> defined on <code>C_PRIMITIVE</code> indicates that a given <code>C_PRIMITIVE</code> is a constrainer for an enumerated type.</p>
</div>
<div class="paragraph">
<p>Since <code>C_PRIMITIVEs</code> don&#8217;t have type names in ADL, the type name is inferred by any parser or compiler tool that deserialises an archetype from ADL, and stored in the <code><em>rm_type</em></code> attribute inherited from <code>C_OBJECT</code> . An example is shown below of a type enumeration.</p>
</div>
<div id="enumerated_constraint" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/enumerated_type_constraint.png" alt="enumerated type constraint" width="70%">
</div>
<div class="title">Figure 4. Enumerated Constraint</div>
</div>
<div class="paragraph">
<p>A parser that deserialises from an object dump format such as ODIN, JSON or XML will not need to do this.</p>
</div>
<div class="paragraph">
<p>The form of the constraint itself is simply a series of Integer, String or other primitive values, or an equivalent range or ranges. In the above example, the ADL equivalent of the pk_percent, pk_fraction constraint on a field of type <code>PROPORTION_KIND</code> is in fact just <em>\{2, 3}</em>, and it is visualised by lookup to show the relevant symbolic names.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_second_order_constraints"><a class="anchor" href="#_second_order_constraints"></a><a class="link" href="#_second_order_constraints">Second Order Constraints</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All of the constraint semantics described above can be considered 'first order' in the sense that they define how specific object/attribute/object hierarchies are defined in the instance possibility space of some part of a reference model.</p>
</div>
<div class="paragraph">
<p>Some constraints however do not fit directly within the object/attribute/object hierarchy scheme, and are considered 'second order constraints' in the archetype formalism. The 'rule' constraints ('invariants' in ADL/AOM 1.4) constitute one such group. These constraints are defined in terms of first order predicate logic statements that can refer to any number of constraint nodes within the main hierarchy. These are described in <a href="#rules_package">[rules_package]</a>.</p>
</div>
<div class="paragraph">
<p>Another type of second order constraint can be 'attached' to the object/attribute/object hierarchy in order to further limit structural possibilities. Although these constraints could also theoretically be expressed as rules, they are supported by direct additions to the main constraint model since they can be easily and intuitively represented inline in ADL and corresponding AOM structures.</p>
</div>
<div class="sect2">
<h3 id="_tuple_constraints"><a class="anchor" href="#_tuple_constraints"></a><a class="link" href="#_tuple_constraints">Tuple Constraints</a></h3>
<div class="paragraph">
<p>Tuple constraints are designed to account for the very common need to constrain the values of more than one RM class attribute together. This effectively treats the attributes in question as a tuple, and the corresponding object constraints are accordingly modelled as tuples as well. A detailed explanation of tuples can be found in the ADL2 specification&#8217;s <a href="https://specifications.openehr.org/releases/AM/latest/ADL2.html#_second_order_constraints">section on second order constraints</a>. Additions to the main constraint model to support tuples are shown below.</p>
</div>
<div id="tuple_constraint_model" class="imageblock text-center text-center">
<div class="content">
<img src="../../_images/uml/AM-aom2.constraint_model-tuple.svg" alt="AM aom2.constraint model tuple">
</div>
<div class="title">Figure 5. Tuple Constraint Model</div>
</div>
<div class="paragraph">
<p>In this model, the type <code>C_ATTRIBUTE_TUPLE</code> groups the co-constrained <code>C_ATTRIBUTEs</code> under a <code>C_COMPLEX_OBJECT</code>. Currently the concrete type is limited to being <code>C_PRIMITIVE_OBJECT</code> to reduce complexity, and since it caters for all known examples of tuple constraints. In principle, any <code>C_DEFINED_OBJECT</code> could be allowed, and this may change in the future.</p>
</div>
<div class="paragraph">
<p>The tuple constraint type replaces all domain-specific constraint types defined in <a href="https://specifications.openehr.org/releases/AM/latest/ADL1.4.html" target="_blank" rel="noopener">ADL/AOM 1.4</a>, including <code>C_DV_QUANTITY</code> and <code>C_DV_ORDINAL</code>.</p>
</div>
<div class="paragraph">
<p>These additions allow standard constraint structures (i.e. <code>C_ATTRIBUTE</code> / <code>C_COMPLEX_OBJECT</code> / <code>C_PRIMITIVE_OBJECT</code> hierarchies) to be 'annotated', while leaving the first order structure intact. The following example shows an archetype instance structure in which a notional <code>ORDINAL</code> type is constrained. The logical requirement is to constrain a <code>ORDINAL</code> to one of three instance possibilities, each of which consists of a pair of values for the attributes value and symbol, of type Integer and <code>TERMINOLOGY_CODE</code> respectively. Each of these three instance constraints should be understood as an alternative for the single valued owning attribute, <code>ELEMENT</code> .value. Tuple constraints achieve the requirement to express the constraints as pairs not just as allowable alternatives at the final leaf level, which would incorrectly allowing any mixing of the Integer and code values.</p>
</div>
<div id="ordinal_tuple_example" class="imageblock text-center text-center">
<div class="content">
<img src="../../_images/uml/AM-ordinal_tuple_example.svg" alt="AM ordinal tuple example">
</div>
<div class="title">Figure 6. Tuple Constraint Example AOM Instances</div>
</div>
<div id="tuple_constraint_example_data" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/tuple_example_data.svg" alt="tuple example data">
</div>
<div class="title">Figure 7. Tuple Constraint Example Data</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertions"><a class="anchor" href="#_assertions"></a><a class="link" href="#_assertions">Assertions</a></h3>
<div class="paragraph">
<p>Assertions are used in <code>ARCHETYPE_SLOTs</code>, in order to express the 'included' and 'excluded' archetypes for the slot. In this case, each assertion is an expression that refers to parts of other archetypes, such as its identifier (e.g. 'include archetypes with <code><em>short_concept_name</em></code> matching <code>xxxx</code> '). Assertions are modelled here as a generic expression tree of unary prefix and binary infix operators. Examples of archetype slots in ADL syntax are given in the openEHR <a href="https://specifications.openehr.org/releases/AM/latest/ADL2.html" target="_blank" rel="noopener">ADL specification</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aom_type_substitutions"><a class="anchor" href="#_aom_type_substitutions"></a><a class="link" href="#_aom_type_substitutions">AOM Type Substitutions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>C_OBJECT</code> types defined in <a href="#constraint_model_top">am.aom2.constraint_model Package</a> are reproduced below, with concrete types that may actually occur in archetypes shown in dark yellow / non-italic.</p>
</div>
<div id="c_object_substitutions" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/c_object_substitutions.svg" alt="c object substitutions">
</div>
<div class="title">Figure 8. C_Object Substitutions</div>
</div>
<div class="paragraph">
<p>Within a specialised archetype, nodes that redefine corresponding nodes in the parent are normally of the same <code>C_OBJECT</code> type (we can think of this as a 'meta-type', since the RM type is the 'type' in the information model sense), but in some cases may also be of different <code>C_OBJECT</code> types.</p>
</div>
<div class="paragraph">
<p>The rules for meta-type redefinition are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A node of each meta-type can be redefined by a node of the same meta-type, with narrowed / added constraints;</p>
</li>
<li>
<p><code>ARCHETYPE_SLOT</code> can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>one or more <code>C_ARCHETYPE_ROOT</code> nodes taken together, considered to define a 'filled' version of the slot;</p>
</li>
<li>
<p>an <code>ARCHETYPE_SLOT</code> , in order to close the slot.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> node can be redefined by:</p>
<div class="ulist">
<ul>
<li>
<p>A <code>C_ARCHETYPE_ROOT</code> , where the archetype_ref of the redefining node is a specialisation of that mentioned in the parent node.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A 'terminal' <code>C_COMPLEX_OBJECT</code> node containing no constraint other than RM type, <code><em>node_id</em></code> and possibly occurrences (i.e. having no substructure), can be redefined by a constraint of any other AOM type other than <code>C_PRMITIVE_OBJECT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 'terminal' <code>C_COMPLEX_OBJECT</code> can be understood as a placeholder node primarily defined for the purpose of stating RM type and meaning (id-code).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_class_definitions"><a class="anchor" href="#_class_definitions"></a><a class="link" href="#_class_definitions">Class Definitions</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_archetype_constraint_class"><a class="anchor" href="#_archetype_constraint_class"></a><a class="link" href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>ARCHETYPE_CONSTRAINT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of all constraint model types. Defines conformance and congruence function signatures.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_adl_code_definitions_class">ADL_CODE_DEFINITIONS</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>parent</strong>: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Parent node, except in the case of the top of a tree, i.e. root <code>C_COMPLEX_OBJECT</code> of an archetype definition.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>soc_parent</strong>: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_prohibited</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node is prohibited. Implemented in subtypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_path</strong> (<br>
a_path: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the relative path a_path exists at this node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path of this node relative to root of archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code>,<br>
rmcc: <code><a href="/releases/BASE/latest/foundation_types.html#_function_class">FUNCTION<sup></a>&lt;&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>,<a href="/releases/BASE/latest/foundation_types.html#_string_class">String<sup></a>&gt;,<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>rmcc</em></code>
</td>
<td class="hdlist2">
<p>RM conformance checker - a lambda (i.e. function object) that can compute conformance of type-names within the  Reference Model on which the current archetype is based. The signature provides two arguments representing respectively, the <code><em>rm_type_name</em></code> of the current node and the <code><em>rm_type_name</em></code> of the node being redefined in a specialisation parent archetype.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in <code>C_OBJECT</code> nodes.</p>
</div>
<div class="paragraph">
<p>Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_second_order_constrained</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>soc_parent /= Void or else (parent /= Void and then parent.is_second_order_constrained)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if there is a second order constraint such as a tuple constraint on this node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_root</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node is the root of the tree.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_leaf</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node is a terminal node in the tree structure, i.e. having no child nodes.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_attribute_class"><a class="anchor" href="#_c_attribute_class"></a><a class="link" href="#_c_attribute_class">C_ATTRIBUTE Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ATTRIBUTE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract model of constraint on any kind of attribute in a class model.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_name</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference model attribute within the enclosing type represented by a <code>C_OBJECT</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>existence</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_multiplicity_interval_class" target="_blank" rel="noopener">Multiplicity_interval</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Constraint settable on every attribute, regardless of whether it is singular or of a container type, which indicates whether its target object exists or not (i.e. is mandatory or not). Only set if it overrides the underlying reference model or parent archetype in the case of specialised archetypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>children</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_object_class">C_OBJECT</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Child <code>C_OBJECT</code> nodes. Each such node represents a constraint on the type of this attribute in its reference model. Multiples occur both for multiple items in the case of container attributes, and alternatives in the case of singular attributes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>differential_path</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to the parent object of this attribute (i.e. doesnt include the name of this attribute). Used only for attributes in differential form, specialised archetypes. Enables only the re-defined parts of a specialised archetype to be expressed, at the path where they occur.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cardinality</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_cardinality_class" target="_blank" rel="noopener">Cardinality</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cardinality constraint of attribute, if a container attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_multiple</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Flag indicating whether this attribute constraint is on a container (i.e. multiply-valued) attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result := children.is_empty and not is_prohibited</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if there is no effective constraint on the children of the RM attribute to which this <code>C_ATTRIBUTE</code> refers.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_mandatory</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = existence /= Void and then existence.is_mandatory</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this <code>C_ATTRIBUTE</code> has an existence constraint of 1..1, i..e. mandation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_attribute_path</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path of this attribute with respect to owning <code>C_OBJECT</code>, including differential path where applicable.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_single</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node logically represents a single-valued attribute. Evaluated as not is_multiple.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = existence = Void and is_single and other.is_single) or (is_multiple and other.is_multiple and cardinality = Void</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other, with the exception of node_id redefnition in <code>C_OBJECT</code> nodes.</p>
</div>
<div class="paragraph">
<p>Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code>,<br>
rmcc: <code><a href="/releases/BASE/latest/foundation_types.html#_function_class">FUNCTION<sup></a>&lt;&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>,<a href="/releases/BASE/latest/foundation_types.html#_string_class">String<sup></a>&gt;,<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = existence_conforms_to (other) and is_single and other.is_single) or else (is_multiple and cardinality_conforms_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_prohibited</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = existence /= Void and then existence.is_prohibited</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this <code>C_ATTRIBUTE</code> has an existence constraint of 0..0, i.e. prohibition.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics"><a class="anchor" href="#_conformance_semantics"></a><a class="link" href="#_conformance_semantics">Conformance Semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_ATRIBUTE</code> node in a specialised archetype to the corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_conforms_to (other: like Current): Boolean
        -- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints as `other'.
        -- Returns False if any of the following is incompatible:
        --	 * cardinality
        --	 * existence
    require
        other /= Void
    do
        Result := existence_conforms_to (other) and
            ((is_single and other.is_single) or else
            (is_multiple and cardinality_conforms_to (other)))
    end

c_congruent_to (other: like Current): Boolean
		-- True if this node on its own (ignoring any subparts) expresses no additional constraints than `other'.
    require
        other /= Void
    do
        Result := existence = Void and ((is_single and other.is_single) or
                (is_multiple and other.is_multiple and cardinality = Void))
    end

existence_conforms_to (other: like Current): Boolean
		-- True if the existence of this node conforms to other.existence
    require
        other_exists: other /= Void
    do
        if existence /= Void and other.existence /= Void then
            Result := other.existence.contains (existence)
        else
            Result := True
        end
    end

cardinality_conforms_to (other: like Current): Boolean
		-- True if the cardinality of this node conforms to other.cardinality, if it exists
    require
        other_exists: other /= Void
    do
        if cardinality /= Void and other.cardinality /= Void then
            Result := other.cardinality.contains (cardinality)
        else
            Result := True
        end
    end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validity_rules"><a class="anchor" href="#_validity_rules"></a><a class="link" href="#_validity_rules">Validity Rules</a></h4>
<div class="paragraph">
<p>The validity rules are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCARM</strong>: attribute name reference model validity: an attribute name introducing an attribute constraint block must be defined in the underlying information model as an attribute (stored or computed) of the type which introduces the enclosing object block.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAEX</strong>: archetype attribute reference model existence conformance: the existence of an attribute, if set, must conform, i.e. be the same or narrower, to the existence of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCAM</strong>: archetype attribute reference model multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of an attribute must conform to that of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFV</strong>: archetype attribute differential path validity: an archetype may only have a differential path if it is specialised..</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDIFP</strong>: specialised archetype attribute differential path validity: if an attribute constraint has a differential path, the path must exist in the flat parent, and also be valid with respect to the reference model, i.e. in the sense that it corresponds to a legal potential construction of objects.</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCE</strong>: specialised archetype attribute node existence conformance: the existence of a redefined attribute node in a specialised archetype, if stated, must conform to the existence of the corresponding node in the flat parent archetype, by having an identical range, or a range wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSAM</strong>: specialised archetype attribute multiplicity conformance: the multiplicity, i.e. whether an attribute is multiply- or single-valued, of a redefined attribute must conform to that of the corresponding attribute in the parent archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to single-valued attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is False:</p>
</div>
<div class="paragraph rule">
<p><strong>VACSO</strong>: single-valued attribute child object occurrences validity: the occurrences of a child object of a single-valued attribute cannot have an upper limit greater than 1.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCU</strong>: cardinality/occurrences upper bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the occurrences must either have an open upper bound (i.e. n..*) which is interpreted as the maximum value allowed within the cardinality, or else a finite upper bound which is &#8656; the cardinality upper bound.</p>
</div>
<div class="paragraph rule">
<p><strong>VACMCO</strong>: cardinality/occurrences orphans: it must be possible for at least one instance of one optional child object (i.e. an object for which the occurrences lower bound is 0) and one instance of every mandatory child object (i.e. object constraints for which the occurrences lower bound is &gt;= 1) to be included within the cardinality range.</p>
</div>
<div class="paragraph rule">
<p><strong>VCACA</strong>: archetype attribute reference model cardinality conformance: the cardinality of an attribute must conform, i.e. be the same or narrower, to the cardinality of the corresponding attribute in the underlying information model.</p>
</div>
<div class="paragraph">
<p>The following validity warnings apply to container attributes, i.e when <code>C_ATTRIBUTE</code>.<code><em>is_multiple</em></code> is True:</p>
</div>
<div class="paragraph rule">
<p><strong>WACMCL</strong>: cardinality/occurrences lower bound validity: where a cardinality with a finite upper bound is stated on an attribute, for all immediate child objects for which an occurrences constraint is stated, the sum of occurrences lower bounds should be lower than the cardinality upper limit.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to cardinality redefinition in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSANCC</strong>: specialised archetype attribute node cardinality conformance: the cardinality of a redefined (multiply-valued) attribute node in a specialised archetype, if stated, must conform to the cardinality of the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_object_class"><a class="anchor" href="#_c_object_class"></a><a class="link" href="#_c_object_class">C_OBJECT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract model of constraint on any kind of object node.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rm_type_name</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference model type that this node corresponds to.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>occurrences</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_multiplicity_interval_class" target="_blank" rel="noopener">Multiplicity_interval</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Occurrences of this object node in the data, under the owning attribute. Upper limit can only be greater than 1 if owning attribute has a cardinality of more than 1.
Only set if it overrides the parent archetype in the case of specialised archetypes, or else the occurrences inferred from the underlying reference model existence and/or cardinality of the containing attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node_id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Semantic identifier of this node, used to distinguish sibling nodes. All nodes must have a <code><em>node_id</em></code>; for nodes under a container <code>C_ATTRIBUTE</code>, the id must be an id-code must be defined in the archetype terminology. For valid structures, all node ids are id-codes.</p>
</div>
<div class="paragraph">
<p>For <code>C_PRIMITIVE_OBJECTs</code> represented in ADL inline form, this attribute will have the special value <code>Primitive_node_id</code>; otherwise it will have the node id read during parsing.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_deprecated</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node and by implication all sub-nodes are deprecated for use.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_order</strong>: <code><a href="#_sibling_order_class">SIBLING_ORDER</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of order of this node with respect to another sibling. Only meaningful in a specialised archetype for a <code>C_OBJECT</code> within a <code>C_ATTRIBUTE</code> with <code><em>is_multiple</em></code> = True.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>specialisation_depth</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Level of specialisation of this archetype node, based on its node_id. The value 0 corresponds to non-specialised, 1 to first-level specialisation and so on. The level is the same as the number of . characters in the node_id code. If node_id is not set, the return value is -1, signifying that the specialisation level should be determined from the nearest parent <code>C_OBJECT</code> node having a node_id.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>effective_occurrences</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_multiplicity_interval_class" target="_blank" rel="noopener">Multiplicity_interval</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code>,<br>
rmcc: <code><a href="/releases/BASE/latest/foundation_types.html#_function_class">FUNCTION<sup></a>&lt;&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>,<a href="/releases/BASE/latest/foundation_types.html#_string_class">String<sup></a>&gt;,<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>rmcc</em></code>
</td>
<td class="hdlist2">
<p>Reference Model conformance checker lambda.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node <code><em>other</em></code>, with the exception of node_id redefnition in <code>C_OBJECT</code> nodes.</p>
</div>
<div class="paragraph">
<p>Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>occurrences_conforms_to</strong> (<br>
other: <code><a href="#_c_object_class">C_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node <code><em>occurrences</em></code> conforms to <code><em>other.occurrences</em></code>; `other' is assumed to be in a flat archetype.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>C_OBJECT from a flat parent archetype.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node_id_conforms_to</strong> (<br>
other: <code><a href="#_c_object_class">C_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = codes_conformant (node_id, other.node_id)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node id conforms to other.node_id, which includes the ids being identical; other is assumed to be in a flat archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_prohibited</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = occurrences /= Void and then occurrences.is_prohibited</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this <code>C_OBJECT</code> node is prohibited, i.e. if its occurrences is 0..0.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_sibling_order_class"><a class="anchor" href="#_sibling_order_class"></a><a class="link" href="#_sibling_order_class">SIBLING_ORDER Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>SIBLING_ORDER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Defines the order indicator that can be used on a <code>C_OBJECT</code> within a container attribute in a specialised archetype to indicate its order with respect to a sibling defined in a higher specialisation level.</p>
</div>
<div class="paragraph">
<p>Misuse: This type cannot be used on a <code>C_OBJECT</code> other than one within a container attribute in a specialised archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_before</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the order relationship is before, if False, it is after.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sibling_node_id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Node identifier of sibling before or after which this node should come.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_after</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the order relationship is <code><em>after</em></code>, computed as the negation of <code><em>is_before</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_occurrences_inferencing_rules"><a class="anchor" href="#_occurrences_inferencing_rules"></a><a class="link" href="#_occurrences_inferencing_rules">Occurrences inferencing rules</a></h4>
<div class="paragraph">
<p>The notion of 'occurrences' does not exist in an object model that might be used as the reference model on which archteypes are based, because it is a class model. However, archetypes commonly constrain the occurrences of object nodes under a container attribute, indicating how many objects conforming to a specific object constraint node might exist.</p>
</div>
<div class="paragraph">
<p>There are various circumstances where it is useful to know the effective occurrences of an archetype object node. One is in validation, in order to determine validity of occurrences constraints; another is in archetype editor tools. Similarly, in an <a href="https://specifications.openehr.org/releases/AM/latest/OPT2.html" target="_blank" rel="noopener">Operational Template</a>, an occurrences constraint is required on all child object nodes of container attributes. Most such constraints come from the source template(s) and archetypes, but often there will be nodes with no occurrences set. In these cases, the occurrences constraint is inferred from the archetype and the reference model according to the following algorithm, where <code>c_object</code> represents any object node in an archetype.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">effective_occurrences (agent rm_prop_mult (rm_type_name, rm_property_path: String): MULTIPLICITY_INTERVAL): MULTIPLICITY_INTERVAL
        -- evaluate effective occurrences, using the RM when no occurrences constraint or parent node
        -- cardinality exists.
        -- In this case, the upper limit of the RM's owning attribute is used to provide a value.
        -- `rm_prop_mult' is a function object that knows how to compute effective object multiplicity
        -- by looking at the owning RM property.
    local
        occ_lower: INTEGER
    do
        if occurrences /= Void then
            Result := occurrences

        elseif parent /= Void then
            if parent.existence /= Void then
                occ_lower := parent.existence.lower
            end
            if parent.cardinality /= Void then
                if parent.cardinality.interval.upper_unbounded then
                    create Result.make_upper_unbounded (occ_lower)
                else
                    create Result.make_bounded (occ_lower, parent.cardinality.interval.upper)
                end
            elseif parent.parent /= Void then
                Result := rm_prop_mult (parent.parent.rm_type_name, parent.parent.rm_attribute_path)
            else
                create Result.make_upper_unbounded (occ_lower)
            end
        else
            create Result.make_open
        end
    end</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above, <code><em>rm_prop_mult</em></code> is a reference to a function within an RM schema representation, which has the following logic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">object_multiplicity (rm_type_name, rm_property_path: String): MULTIPLICITY_INTERVAL
        -- compute the effective object multiplicity of objects at rm_property_path within type rm_type_name
        -- from the Reference Model
    do
        rm_property_def := get_rm_property_def (rm_type_name, rm_property_path)
        if rm_property_def.is_container then
            if rm_property_def.cardinality.upper_unbounded then
                create Result.make_upper_unbounded (0)
            else
                create Result.make_bounded (0, rm_property_def.cardinality.upper)
            end
        else
            Result := rm_property_def.existence
        end
    end</code></pre>
</div>
</div>
<div class="paragraph">
<p>How this is concretely implemented depends on the modelling environment. One possible RM model implementation is described in the <a href="https://specifications.openehr.org/releases/LANG/latest/bmm.html" target="_blank" rel="noopener">openEHR Basic meta-model (BMM) specification</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conformance_semantics_2"><a class="anchor" href="#_conformance_semantics_2"></a><a class="link" href="#_conformance_semantics_2">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_OBJECT</code> node in a specialised archetype to the corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_conforms_to (other: like Current; agent rm_types_conformant (a_type, other_type: String): Boolean): Boolean
        -- True if this node on its own (ignoring any subparts) expresses strictly narrower constraints
        -- as `other'.
        -- `other' is typically from the flat parent archetype.
        -- Returns True only when the following is True:
        --	 * rm_type_name is the same or a subtype of rm_type_name of other;
        --	 * occurrences is same (= Void) or a sub-interval
        --	 * node_id is the same, or redefined to a legal code at the level of the owning archetype
        -- `rm_types_conformant' is an agent (lambda) that can test an RM type's conformance to another RM type
    require
        other /= Void
        rm_types_conformant /= Void
    do
        Result := node_id_conforms_to (other) and
            occurrences_conforms_to (other) and
            (rm_type_name.is_case_insensitive_equal (other.rm_type_name) or else
            rm_types_conformant (rm_type_name, other.rm_type_name))
    end

c_congruent_to (other: like Current): Boolean
        -- True if this node on its own (ignoring any subparts) expresses no constraints in addition
        -- to `other', other than possible redefinition of the node id, which doesn't matter, since
        -- this won't get lost in a compressed path.
        -- Current and `other' are typically from flat archetypes being compared to generate a diff.
        -- Used to determine if path segments can be compressed.
        -- Returns True if:
        --	 * rm_type_name is identical
        --	 * occurrences is Void or else identical to other.occurrences
        -- 	 * sibling_order is Void or else identical to other.sibling_order
        --	 * node_id is identical or else is the only child that overlays the parent node
    require
        other /= Void
    do
        Result := rm_type_name.is_case_insensitive_equal (other.rm_type_name) and
            (occurrences = Void or else (other.occurrences /= Void and then
                occurrences.is_equal (other.occurrences))) and
            (sibling_order = Void or else (other.sibling_order /= Void and then
                sibling_order.is_equal (other.sibling_order))) and
            node_reuse_congruent (other)
    end

occurrences_conforms_to (other: like Current): Boolean
    require
        other_exists: other /= Void
    do
        if occurrences /= Void and other.occurrences /= Void then
            Result := other.occurrences.contains (occurrences)
        else
            Result := True
        end
    end

node_id_conforms_to (other: like Current): Boolean
    require
        other_exists: other /= Void
    do
        Result := codes_conformant (node_id, other.node_id)
    end

node_reuse_congruent (other: like Current): Boolean
        -- True if this node is the sole re-using node of the corresponding node in the flat
    do
        Result := node_id_conforms_to (other) and
            (is_root or else
            attached parent and then parent.child_reuse_count (other.node_id) = 1)
    end</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validity_rules_2"><a class="anchor" href="#_validity_rules_2"></a><a class="link" href="#_validity_rules_2">Validity Rules</a></h4>
<div class="paragraph">
<p>The validity rules for all <code>C_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCORM</strong> object constraint type name existence: a type name introducing an object constraint block must be defined in the underlying information model.</p>
</div>
<div class="paragraph rule">
<p><strong>VCORMT</strong> object constraint type validity: a type name introducing an object constraint block must be the same as or conform to the type stated in the underlying information model of its owning attribute.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOCD</strong> object constraint definition validity: an object constraint block consists of one of the following (depending on subtype): an 'any' constraint; a reference; an inline definition of sub-constraints, or nothing, in the case where occurrences is set to {0}.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOID</strong> object node identifier validity: every object node must have a node identifier.</p>
</div>
<div class="paragraph rule">
<p><strong>VCOSU</strong> object node identifier validity: every object node must be unique within the archetype.</p>
</div>
<div class="paragraph">
<p>The following validity rules govern <code>C_OBJECTs</code> in specialised archetypes.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONT</strong> specialised archetype object node meta-type conformance: the meta-type of a redefined object node (i.e. the AOM node type such as <code>C_COMPLEX_OBJECT</code> etc) in a specialised archetype must be the same as that of the corresponding node in the flat parent, with the following exceptions: a <code>C_COMPLEX_OBJECT</code> with no child attributes may be redefined by a node of any AOM type except <code>C_PRIMITIVE_OBJECT</code>; a <code>C_COMPLEX_OBJECT_PROXY</code>, may be redefined by a <code>C_COMPLEX_OBJECT</code>; an <code>ARCHTEYPE_SLOT</code> may be redefined by <code>C_ARCHETYPE_ROOT</code> (i.e. 'slot-filling'). See also validity rules VDSSID and VARXID.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCT</strong> specialised archetype object node reference type conformance: the reference model type of a redefined object node in a specialised archetype must conform to the reference model type in the corresponding node in the flat parent archetype by either being identical, or conforming via an inheritance relationship in the relevant reference model.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONIR</strong> specialised archetype redefined object node identifier condition: the node identifier of an object node in a specialised archetype that is a redefinition of a node in the flat parent must be redefined if any of reference model type, node identifier definition in the terminology, or occurrences of the immediate object constraint is redefined, with the exception of occurrences being redefined to {0}, i.e. exclusion.</p>
</div>
<div class="paragraph deprecated">
<p><em>Deprecated</em>: <strong>VSONI</strong> specialised archetype redefined object node identifier validity: if an object node in a specialised archetype is a redefinition of a node in the flat parent according to VSONIR, and the parent node carries a node identifier, it must carry a node identifier specalised at the level of the child archetype. Otherwise it must carry the same node identifier (or none) as the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIN</strong> specialised archetype new object node identifier validity: if an object node in a specialised archetype is a new node with respect to the flat parent, and it carries a node identifier, the identifier must be a 'new' node identifier, specalised at the level of the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONIF</strong> specialised archetype object node identifier validity in flat siblings: the identification (or not) of an object node in a specialised archetype must be valid with respect to any sibling object nodes in the flattened parent (see VACMI).</p>
</div>
<div class="paragraph rule">
<p><strong>VSONCO</strong> specialised archetype redefine object node occurrences validity: the occurrences of a redefined object node in a specialised archetype, if stated, must conform to the occurrences in the corresponding node in the flat parent archetype by either being identical, or being wholly contained by the latter.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPT</strong> specialised archetype prohibited object node AOM type validity: the occurrences of a redefined object node in a specialised archetype, may only be prohibited (i.e. {0}) if the matching node in the parent is of the same AOM type.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPI</strong> specialised archetype prohibited object node AOM node id validity: a redefined object node in a specialised archetype with occurrences matching {0} must have exactly the same <code><em>node_id</em></code> as the node in the flat parent being redefined.</p>
</div>
<div class="paragraph rule">
<p><strong>VSONPO</strong> specialised archetype object node prohibited occurrences validity: the occurrences of a new (i.e. having no corresponding node in the parent flat) object node in a specialised archetype, if stated, may not be 'prohibited', i.e. {0}, since prohibition only makes sense for an existing node.</p>
</div>
<div class="paragraph rule">
<p><strong>VSSM</strong> specialised archetype sibling order validity: the sibling order node id-code used in a sibling marker in a specialised archetype must refer to a node found within the same container in the flat parent archetype, or a specialised version of any such node, redefined in the current archetype.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_defined_object_class"><a class="anchor" href="#_c_defined_object_class"></a><a class="link" href="#_c_defined_object_class">C_DEFINED_OBJECT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_DEFINED_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent type of <code>C_OBJECT</code> subtypes that are defined by value, i.e. whose definitions are actually in the archetype rather than being by reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_object_class">C_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default value set in a template, and present in an operational template. Generally limited to leaf and near-leaf nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (<br>
a_value: <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>a_value</em></code> is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate a prototype value from this constraint object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_default_value</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if there is an assumed value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_complex_object_class"><a class="anchor" href="#_c_complex_object_class"></a><a class="link" href="#_c_complex_object_class">C_COMPLEX_OBJECT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_COMPLEX_OBJECT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on complex objects, i.e. any object that consists of other object constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_defined_object_class">C_DEFINED_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attributes</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_attribute_class">C_ATTRIBUTE</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of constraints on attributes of the reference model type represented by this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>attribute_tuples</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_attribute_tuple_class">C_ATTRIBUTE_TUPLE</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of attribute tuple constraints under this object constraint, if any.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = attributes.is_empty and not is_prohibited</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_validity_rules_3"><a class="anchor" href="#_validity_rules_3"></a><a class="link" href="#_validity_rules_3">Validity Rules</a></h4>
<div class="paragraph">
<p>The validity rules for <code>C_COMPLEX_OBJECTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VCATU</strong> attribute uniqueness: sibling attributes occurring within an object node must be uniquely named with respect to each other, in the same way as for class definitions in an object reference model.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_archetype_root_class"><a class="anchor" href="#_c_archetype_root_class"></a><a class="link" href="#_c_archetype_root_class">C_ARCHETYPE_ROOT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ARCHETYPE_ROOT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A specialisation of <code>C_COMPLEX_OBJECT</code> whose node_id attribute is an archetype identifier rather than the normal internal node code (i.e. id-code).</p>
</div>
<div class="paragraph">
<p>Used in two situations. The first is to represent an 'external reference' to an archetype from within another archetype or template. This supports re-use. The second use is within a template, where it is used as a slot-filler.</p>
</div>
<div class="paragraph">
<p>For a new external reference, the <code><em>node_id</em></code> is set in the normal way, i.e. with a new code at the specialisation level of the archetype.</p>
</div>
<div class="paragraph">
<p>For a slot-filler or a redefined external reference, the <code><em>node_id</em></code> is set to a specialised version of the <code><em>node_id</em></code> of the node being specialised, allowing matching to occur during flattening.</p>
</div>
<div class="paragraph">
<p>In all uses within source archetypes and templates, the <code><em>children</em></code> attribute is <code>Void</code>.</p>
</div>
<div class="paragraph">
<p>In an operational template, the <code><em>node_id</em></code> is converted to the <code><em>archetype_ref</em></code>, and the structure contains the result of flattening any template overlay structure and the underlying flat archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_complex_object_class">C_COMPLEX_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>archetype_ref</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to archetype is being used to fill a slot or redefine an external reference. Typically an 'interface' archetype id, i.e. identifier with partial version information.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_validity_rules_4"><a class="anchor" href="#_validity_rules_4"></a><a class="link" href="#_validity_rules_4">Validity Rules</a></h4>
<div class="paragraph">
<p>The following validity rules apply to <code>C_ARCHETYPE_ROOT</code> objects:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXNC</strong> external reference node identifier validity: if the external reference object is a redefinition of either a slot node, or another external reference node, the <code><em>node_id</em></code> of the object must conform to (i.e. be the same or a child of) the <code><em>node_id</em></code> of the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXAV</strong> external reference node archetype reference validity: if the reference object is a redefinition of another external reference node, the <code><em>archetype_ref</em></code> of the object must match a real archetype that has as an ancestor the archetype matched by the archetype reference mentioned in the corresponding parent node.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXTV</strong> external reference type validity: the reference model type of the reference object archetype identifier must be identical, or conform to the type of the slot, if there is one, in the parent archetype, or else to the reference model type of the attribute in the flat parent under which the reference object appears in the child archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXR</strong> external reference refers to resolvable artefact: the archetype reference must refer to an artefact that can be found in the current repository.</p>
</div>
<div class="paragraph">
<p>The following validity rules apply to a <code>C_ARCHETYPE_ROOT</code> that specialises a <code>ARCHETYPE_SLOT</code> in the flat parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VARXS</strong> external reference slot conformance: where an archetype reference redefines an archetype slot in the flat parent, it must conform to the archetype slot node by being of a reference model type from the same reference model as the current archetype.</p>
</div>
<div class="paragraph rule">
<p><strong>VARXID</strong> external reference slot filling id validity: an external reference node defined as a filler for a slot in the parent archetype must have a node id that is a specialisation of that of the slot.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_archetype_slot_class"><a class="anchor" href="#_archetype_slot_class"></a><a class="link" href="#_archetype_slot_class">ARCHETYPE_SLOT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>ARCHETYPE_SLOT</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint describing a  slot' where another archetype can occur.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_object_class">C_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>includes</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/expression.html#_assertion_class">ASSERTION</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of constraints defining other archetypes that could be included at this point.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>excludes</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/expression.html#_assertion_class">ASSERTION</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of constraints defining other archetypes that cannot be included at this point.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_closed</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this slot specification in this artefact is closed to further filling either in further specialisations or at runtime. Default value False, i.e. unless explicitly set, a slot remains open.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if no constraints stated, and slot is not closed.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_validity_rules_5"><a class="anchor" href="#_validity_rules_5"></a><a class="link" href="#_validity_rules_5">Validity Rules</a></h4>
<div class="paragraph">
<p>The validity rules for <code>ARCHETYPE_SLOTs</code> are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VDFAI</strong> archetype identifier validity in definition. Any archetype identifier mentioned in an archetype slot in the definition section must conform to the published openEHR specification for archetype identifiers.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSIV</strong> archetype slot 'include' constraint validity. The 'include' constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSEV</strong> archetype slot 'exclude' constraint validity. The 'exclude' constraint in an archetype slot must conform to the slot constraint validity rules.</p>
</div>
<div class="paragraph">
<p>The slot constraint validity rules are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">if includes not empty and = any then
    not (excludes empty or /= any) ==&gt; VDSEV Error
elseif includes not empty and /= any then
    not (excludes empty or = any) ==&gt; VDSEV Error
elseif excludes not empty and = any then
    not (includes empty or /= any) ==&gt; VDSIV Error
elseif excludes not empty and /= any then
    not (includes empty or = any) ==&gt; VDSIV Error
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following validity rules apply to <code>ARCHETYPE_SLOTs</code> defined as the specialisation of a slot in the parent archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSID</strong> slot redefinition child node id: a slot node in a specialised archetype that redefines a slot node in the flat parent must have an identical node id.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSM</strong> specialised archetype slot definition match validity. The set of archetypes matched from a library of archetypes by a specialised archetype slot definition must be a proper subset of the set matched from the same library by the parent slot definition.</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSP</strong> specialised archetype slot definition parent validity. The flat parent of the specialisation of an archetype slot must be not be closed (is_closed = False).</p>
</div>
<div class="paragraph rule">
<p><strong>VDSSC</strong> specialised archetype slot definition closed validity. In the specialisation of an archetype slot, either the slot can be specified to be closed (is_closed = True) or the slot can be narrowed, but not both.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_complex_object_proxy_class"><a class="anchor" href="#_c_complex_object_proxy_class"></a><a class="link" href="#_c_complex_object_proxy_class">C_COMPLEX_OBJECT_PROXY Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_COMPLEX_OBJECT_PROXY</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A constraint defined by proxy, using a reference to an object constraint defined elsewhere in the same archetype. Note that since this object refers to another node, there are two objects with available occurrences values. The local occurrences value on a <code>COMPLEX_OBJECT_PROXY</code> should always be used; when setting this from a serialised form, if no occurrences is mentioned, the target occurrences should be used (not the standard default of <code>{1..1}</code>); otherwise the locally specified occurrences should be used as normal. When serialising out, if the occurrences is the same as that of the target, it can be left out.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_object_class">C_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target_path</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to an object node using archetype path notation.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>use_target_occurrences</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = (occurrences = Void)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if target occurrences are to be used as the value of occurrences in this object; by the time of runtime use, the target occurrences value has to be set into this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>occurrences_conforms_to</strong> (<br>
other: <code><a href="#_c_object_class">C_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node occurrences conforms to <code><em>other.occurrences</em></code>; <code><em>other</em></code> is assumed to be in a flat archetype.</p>
</div>
<div class="paragraph">
<p>If <code><em>other</em></code> is a <code>C_COMPLEX_OBJECT</code>, then always <code>True</code>, since if occurrences defined on proxy node, it is an override of  the occurrences on the target, and it doesn&#8217;t have to conform to anything except the containing attribute&#8217;s cardinality. However, if <code><em>other</em></code> is also a <code>C_COMPLEX_OBJECT</code> then the override is of another use_node, and normal occurrences apply</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p><code>C_OBJECT</code> from a flat parent archetype.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_validity_rules_6"><a class="anchor" href="#_validity_rules_6"></a><a class="link" href="#_validity_rules_6">Validity Rules</a></h4>
<div class="paragraph">
<p>The following validity rules applies to internal references:</p>
</div>
<div class="paragraph rule">
<p><strong>VUNT</strong> <code>use_node</code> reference model type validity: the reference model type mentioned in an <code>C_COMPLEX_OBJECT_PROXY</code> node must be the same as or a super-type (according to the reference model) of the reference model type of the node referred to.</p>
</div>
<div class="paragraph rule">
<p><strong>VUNP</strong> <code>use_node</code> path validity: the path mentioned in a use_node statement must refer to an object node defined elsewhere in the same archetype or any of its specialisation parent archetypes, that is not itself an internal reference node, and which carries a node identifier if one is needed at the reference point.</p>
</div>
<div class="paragraph">
<p>The following validity rule applies to the redefinition of an internal reference in a specialised archetype:</p>
</div>
<div class="paragraph rule">
<p><strong>VSUNT</strong> use_node specialisation parent validity: a <code>C_COMPLEX_OBJECT_PROXY</code> node may be redefined in a specialised archetype by another <code>C_COMPLEX_OBJECT_PROXY</code> (e.g. in order to redefine occurrences), or by a <code>C_COMPLEX_OBJECT</code> structure that legally redefines the target <code>C_COMPLEX_OBJECT</code> node referred to by the reference.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_primitive_object_class"><a class="anchor" href="#_c_primitive_object_class"></a><a class="link" href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_PRIMITIVE_OBJECT (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Parent of types representing constraints on primitive types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_defined_object_class">C_DEFINED_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value to be assumed if none sent in data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_enumerated_type_constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this object represents a constraint on an enumerated type from the reference model, where the latter is assumed to be based on a primitive type, generally Integer or String.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Constraint represented by this object; redefine in descendants.</p>
</div>
<div class="paragraph">
<p>Instances of this type represented in ADL inline form, the <code><em>node_id</em></code> attribute will have the special value <code>Primitive_node_id</code>; otherwise it will have the node id read during parsing.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>has_assumed_value</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if there is an assumed value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constrained_typename</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Generate name of native type that is constrained by this <code>C_XXX</code> type. For most types, it is the <code>C_XXX</code> typename without the <code>C_</code>, i.e. <code>XXX</code>. E.g. <code>C_INTEGER</code> &#8594; <code>Integer</code>. For the date/time types the mapping is different.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a>[1]</code>,<br>
rmcc: <code><a href="/releases/BASE/latest/foundation_types.html#_function_class">FUNCTION<sup></a>&lt;&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>,<a href="/releases/BASE/latest/foundation_types.html#_string_class">String<sup></a>&gt;,<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other.
Typically used during validation of special-ised archetype nodes.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>rmcc</em></code>
</td>
<td class="hdlist2">
<p>Reference Model conformance checker lambda.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node expresses a value constraint that conforms to that of <code>other</code>. Effected in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node <code><em>other</em></code>, with the exception of node_id redefnition in <code>C_OBJECT</code> nodes.</p>
</div>
<div class="paragraph">
<p>Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this node expresses the same value constraint as <code>other</code>. Effected in descendants.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_validity_rules_7"><a class="anchor" href="#_validity_rules_7"></a><a class="link" href="#_validity_rules_7">Validity Rules</a></h4>
<div class="paragraph">
<p>Validity rules applying to all <code>C_PRIMITIVE_OBJECT</code> types are as follows:</p>
</div>
<div class="paragraph rule">
<p><strong>VOBAV</strong> object node assumed value validity: the value of an assumed value must fall within the value space defined by the constraint to which it is attached.</p>
</div>
</div>
<div class="sect3">
<h4 id="_conformance_semantics_3"><a class="anchor" href="#_conformance_semantics_3"></a><a class="link" href="#_conformance_semantics_3">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_PRIMITIVE_OBJECT</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_conforms_to (other: like Current; agent rm_types_conformant (a_type, other_type: String): Boolean): Boolean
        -- True if this node on its own (ignoring any subparts) expresses the same or narrower constraints
        -- as `other'. Returns True only when the following is True:
        --   * occurrences conforms
        --   * `rm_type_name' is identical to that in `other'
        -- `rm_types_conformant' is an agent (lambda) that can test an RM type's conformance to another RM type
    require
        other /= Void
        rm_types_conformant /= Void
    do
        precursor (other, rm_type_conformance_checker) and c_value_conforms_to (other)
    end

c_value_conforms_to (other: like Current): Boolean
        -- True if this node expresses a value constraint that conforms to that of `other'
    deferred
    end

c_congruent_to (other: like Current): Boolean
        -- True if this node on its own (ignoring any subparts) expresses no constraints in addition to `other'
    require
        other /= Void
    do
		Result := constrained_typename.is_case_insensitive_equal (other.constrained_typename) and
            c_value_congruent_to (other)
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node's value constraint is the same as that of `other'
    deferred
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_boolean_class"><a class="anchor" href="#_c_boolean_class"></a><a class="link" href="#_c_boolean_class">C_BOOLEAN Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_BOOLEAN</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances of <code>Boolean</code>. Both attributes cannot be set to False, since this would mean that the Boolean value being constrained cannot be <code>True</code> or <code>False</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean constraint - a list of Boolean values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assumed Boolean value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default Boolean value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prototype Boolean value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = constraint.is_empty</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_boolean_class">C_BOOLEAN</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>other.any_allowed</em></code> or else every constraint in the <code><em>constraint</em></code> list exists in the <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_boolean_class">C_BOOLEAN</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the items in <code><em>constraint</em></code> are equal in number and identical pair-wise with those in <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics_4"><a class="anchor" href="#_conformance_semantics_4"></a><a class="link" href="#_conformance_semantics_4">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_BOOLEAN</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_value_conforms_to (other: like Current): Boolean
        -- True if this node is a strict subset of `other'
    do
        Result := other.any_allowed or
            constraint.count &lt; other.constraint.count and
            across constraint as val_csr all other.constraint.has (val_csr.item) end
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node's value constraint is the same as that of `other'
    do
        Result := constraint.count = other.constraint.count and
            across constraint as val_csr all other.constraint.has (val_csr.item) end
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_string_class"><a class="anchor" href="#_c_string_class"></a><a class="link" href="#_c_string_class">C_STRING Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_STRING</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances of <code>String</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>String constraint - a list of literal strings and / or regular expression strings delimited by the / character.</p>
</div>
<div class="paragraph">
<p>To represent no constraint, use an empty list, or alternatively, a regex 'any' pattern, i.e. <code>/.*/</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default String value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assumed String value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (<br>
a_value: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if a_value is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = constraint.is_empty or else constraint.count = 1 and constraint.first.is_equal (Regex_any_string)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_string_class">C_STRING</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>other.any_allowed</em></code> or else every constraint in the <code><em>constraint</em></code> list exists in the <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_string_class">C_STRING</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the items in <code><em>constraint</em></code> are equal in number and identical pair-wise with those in <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics_5"><a class="anchor" href="#_conformance_semantics_5"></a><a class="link" href="#_conformance_semantics_5">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_STRING</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_value_conforms_to (other: like Current): Boolean
        -- True if `constraint' is a strict subset of other.constraint
    do
        Result := other.any_allowed or
            constraint.count &lt; other.constraint.count and
            across constraint as constraint_csr all
                other.constraint.has (constraint_csr.item)
            end
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node's value constraint is the same as that of `other'
    do
        Result := constraint.count = other.constraint.count and then
            across constraint as str_csr all
                other.constraint.i_th (str_csr.cursor_index).is_equal (str_csr.item)
            end
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_ordered_class"><a class="anchor" href="#_c_ordered_class"></a><a class="link" href="#_c_ordered_class">C_ORDERED Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_ORDERED&lt;T&gt; (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of primitive constrainer classes based on <code>Ordered</code> base types, i.e. types like <code>Integer</code>, <code>Real</code>, and the Date/Time types. The model constraint is a List of Intervals, which may include point Intervals, and acts as a efficient and formally tractable representation of any number of point values and/or contiguous intervals of an ordered value domain.</p>
</div>
<div class="paragraph">
<p>In its simplest form, the constraint accessor returns just a single point <code>Interval&lt;T&gt;</code> object, representing a single value.</p>
</div>
<div class="paragraph">
<p>The next simplest form is a single proper <code>Interval &lt;T&gt;</code> (i.e. normal two-sided or half-open interval). The most complex form is a list of any combination of point and proper intervals.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Constraint in the form of a List of Intervals of the parameter type T. Concrete types generated in descendants via template binding.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = constraint.is_empty</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_ordered_class">C_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>other.any_allowed</em></code> or else for every constraint in the <code><em>constraint</em></code> list there is a constraint in <code><em>other.constraint</em></code> that contains it.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_ordered_class">C_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if the items in <code><em>constraint</em></code> are equal in number and identical pair-wise with those in <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics_6"><a class="anchor" href="#_conformance_semantics_6"></a><a class="link" href="#_conformance_semantics_6">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_ORDERED</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_value_conforms_to (other: like Current): Boolean
        -- True if this node is a strict subset of `other'
    do
        Result := other.any_allowed or
            across constraint as ivl_csr all
                across other.constraint as other_ivl_csr some other_ivl_csr.item.contains (ivl_csr.item) end
            end
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node is the same as `other'
    do
        Result := constraint.count = other.constraint.count and
            across constraint as ivl_csr all
                ivl_csr.item.is_equal (other.constraint.i_th (ivl_csr.cursor_index))
            end
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_integer_class"><a class="anchor" href="#_c_integer_class"></a><a class="link" href="#_c_integer_class">C_INTEGER Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_INTEGER</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances of Integer.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_ordered_class">C_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on <code>Integer</code>, in the form of <code>List&lt;Interval&lt;Integer&gt;&gt;</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_real_class"><a class="anchor" href="#_c_real_class"></a><a class="link" href="#_c_real_class">C_REAL Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_REAL</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances of Real.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_ordered_class">C_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on <code>Real</code>, in the form of <code>List&lt;Interval&lt;Real&gt;&gt;</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_temporal_class"><a class="anchor" href="#_c_temporal_class"></a><a class="link" href="#_c_temporal_class">C_TEMPORAL Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_TEMPORAL&lt;T&gt; (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Purpose Abstract parent of <code>C_ORDERED</code> types whose base type is an ISO date/time type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_ordered_class">C_ORDERED</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>pattern_constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional alternative constraint in the form of a pattern based on ISO8601. See descendants for details.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_pattern_constraint</strong> (<br>
a_pattern: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>a_pattern</em></code> is a valid constraint. Define in concrete descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_pattern_constraint_replacement</strong> (<br>
a_pattern: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>[1]</code>,<br>
an_other_pattern: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Return True if <code><em>a_pattern</em></code> can be replaced by <code><em>an_other_pattern</em></code> in a specialised constraint. Define in concrete subtypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result = precursor and pattern_constraint.is_empty</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_ordered_class">C_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if precursor() or else <code><em>other.pattern_constraint</em></code> is empty, or else <code><em>pattern_constraint</em></code> is a valid (narrower) replacement for <code><em>other.pattern_constraint</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_ordered_class">C_ORDERED</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code>precursor (other)</code> and <code><em>pattern_constraint</em> ~ <em>other.pattern_constraint</em></code>, i.e. either both <code>Void</code> or else both non-<code>Void</code> and identical.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics_7"><a class="anchor" href="#_conformance_semantics_7"></a><a class="link" href="#_conformance_semantics_7">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a node of a <code>C_TEMPORAL</code> descendant type in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_value_conforms_to (other: like Current): Boolean
        -- True if this node is a strict subset of `other'
    do
        Result := precursor (other) and
            other.pattern_constraint.is_empty or
                not pattern_constraint.is_empty and then
                valid_pattern_constraint_replacement (pattern_constraint, other.pattern_constraint)
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node's value constraint is the same as that of `other'
    do
        Result := precursor (other) and
            pattern_constraint ~ other.pattern_constraint
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_date_class"><a class="anchor" href="#_c_date_class"></a><a class="link" href="#_c_date_class">C_DATE Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DATE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances representing dates in the form either of a set of validity values, or else date ranges based on the <code>C_ORDERED</code> list constraint.</p>
</div>
<div class="paragraph">
<p>There is no validity flag for <code><em>year</em></code>, since it must always be by definition mandatory in order to have a sensible date at all. Syntax expressions of instances of this class include <code>"YYYY-??-??"</code> (date with optional month and day).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_temporal_class">C_TEMPORAL</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_iso8601_date_class" target="_blank" rel="noopener">Iso8601_date</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on the assumed primitive <code>Iso8601_date</code> type, in the form of one or more <code>Interval&lt;Iso8601_date&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For a pattern constraint or no constraint, use an empty list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of month in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of day in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Pattern_validity</em>: <code>pattern /= Void implies valid_iso8601_date_constraint_pattern(pattern)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_time_class"><a class="anchor" href="#_c_time_class"></a><a class="link" href="#_c_time_class">C_TIME Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances representing times in the form either of a set of validity values, or else time ranges based on the <code>C_ORDERED</code> list constraint.</p>
</div>
<div class="paragraph">
<p>There is no validity flag for <code><em>hour</em></code>, since it must always be by definition mandatory in order to have a sensible time at all. Syntax expressions of instances of this class include <code>HH:??:xx</code> (time with optional minutes and seconds not allowed).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_temporal_class">C_TEMPORAL</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_iso8601_time_class" target="_blank" rel="noopener">Iso8601_time</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on the assumed primitive <code>Iso8601_time</code> type, in the form of one or more  <code>Interval&lt;Iso8601_time&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For a pattern constraint or no constraint, use an empty list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of minute in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of second in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of millisecond in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Pattern_validity</em>: <code>pattern /= Void implies valid_iso8601_time_constraint_pattern (pattern)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_date_time_class"><a class="anchor" href="#_c_date_time_class"></a><a class="link" href="#_c_date_time_class">C_DATE_TIME Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DATE_TIME</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances representing date/times, i.e. instants in time.</p>
</div>
<div class="paragraph">
<p>There is no validity flag for <code><em>year</em></code>, since it must always be by definition mandatory in order to have a sensible date/time at all. Syntax expressions of instances of this class include <code>"YYYY-MM-DDT??:??:??"</code> (date/time with optional time) and <code>"YYYY-MMDDTHH:MM:xx"</code> (date/time, seconds not allowed).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_temporal_class">C_TEMPORAL</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_iso8601_date_time_class" target="_blank" rel="noopener">Iso8601_date_time</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on the assumed primitive <code>Iso8601_date_time</code> type, in the form of one or more <code>Interval&lt;Iso8601_date_time&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For a pattern constraint or no constraint, use an empty list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>month_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of month in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>day_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of day in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timezone_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of timezone in constrained date.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minute_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of minute in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>second_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of second in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>millisecond_validity</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_validity_kind_enumeration" target="_blank" rel="noopener">VALIDITY_KIND</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Validity of millisecond in constrained time.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Pattern_validity</em>: <code>pattern /= Void implies valid_iso8601_date_time_constraint_pattern(pattern)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_duration_class"><a class="anchor" href="#_c_duration_class"></a><a class="link" href="#_c_duration_class">C_DURATION Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_DURATION</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constraint on instances representing duration, which is assumed to have the same parts as the ISO8601 duration string. Thus, constraints are of the form <code>"PWD"</code> (weeks and/or days), <code>"PDTHMS"</code> (days, hours, minutes, seconds) and so on.</p>
</div>
<div class="paragraph">
<p>In official ISO 8601:2004, the W (week) designator cannot be mixed in; allowing it is an openEHR-wide exception. The allowed patterns are: <code>P[Y&#124;y][M&#124;m][D&#124;d][T[H&#124;h][M&#124;m][S&#124;s]] and P[W&#124;w]</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_temporal_class">C_TEMPORAL</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_interval_class">Interval</sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_iso8601_duration_class" target="_blank" rel="noopener">Iso8601_duration</a>&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Formal constraint on the assumed primitive <code>Iso8601_duration</code> type, in the form of one or more <code>Interval&lt;Iso8601_duration&gt;</code>.</p>
</div>
<div class="paragraph">
<p>For a pattern constraint or no constraint, use an empty list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>years_allowed:</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if years are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>months_allowed:</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if months are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>weeks_allowed:</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if weeks are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>days_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if days are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hours_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if hours are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>minutes_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if minutes are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>seconds_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if seconds are allowed in the constrained Duration.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_terminology_code_class"><a class="anchor" href="#_c_terminology_code_class"></a><a class="link" href="#_c_terminology_code_class">C_TERMINOLOGY_CODE Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_TERMINOLOGY_CODE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Constrainer type for instances of <code>Terminology_code</code>. The constraint attribute can contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a single at-code</p>
</li>
<li>
<p>a single ac-code, representing a value-set that is defined in the archetype terminology</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is an assumed value for the ac-code case above, the assumed_value attribute contains a single at-code, which must come from the list of at-codes defined as the internal value set for the ac-code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>constraint</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Type of individual constraint - a single string that can either be a local at-code, or a local ac-code signifying a locally defined value set. If an ac-code, assumed_value may contain an at-code from the value set of the ac-code.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assumed_value</strong>: <code><a href="/releases/BASE/latest/base_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Assumed Terminology code value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>default_value</strong>: <code><a href="/releases/BASE/latest/base_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_expanded</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Effective set of at-code values corresponding to an ac-code for a locally defined value set. Not defined for ac-codes that have no local value set.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_substituted</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/foundation_types.html#_uri_class">Uri</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For locally defined value sets within individual code bindings: return the term URI(s) substituted from bindings for local at-codes in <code><em>value_set_expanded</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_set_resolved</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_list_class">List<sup></a>&lt;<a href="/releases/BASE/latest/base_types.html#_terminology_code_class">Terminology_code</sup></a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For locally defined value sets within individual code bindings: final set of external codes to which value set is resolved.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>valid_value</strong> (<br>
a_value: <code><a href="/releases/BASE/latest/base_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if a <code><em>value</em></code> is valid with respect to constraint expressed in concrete instance of this type.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>prototype_value</strong> (): <code><a href="/releases/BASE/latest/base_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A generated prototype value from this constraint object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>any_allowed</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result := constraint.is_empty</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if any value (i.e. instance) of the reference model type would be allowed. Redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_conforms_to</strong> (<br>
other: <code><a href="#_c_terminology_code_class">C_TERMINOLOGY_CODE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>other.any_allowed</em></code> or else every constraint in the <code><em>constraint</em></code> list exists in the <code><em>other.constraint</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_value_congruent_to</strong> (<br>
other: <code><a href="#_c_terminology_code_class">C_TERMINOLOGY_CODE</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if <code><em>constraint</em></code> and <code><em>other.constraint</em></code> are both value-set ids, and expand to identical value sets, or else are identical value codes.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_conformance_semantics_8"><a class="anchor" href="#_conformance_semantics_8"></a><a class="link" href="#_conformance_semantics_8">Conformance semantics</a></h4>
<div class="paragraph">
<p>The following functions formally define the conformance of a <code>C_TERMINOLOGY_CODE</code> node in a specialised archetype to a corresponding node in a parent archetype, where 'corresponding' means a node found at the same or a congruent path and of the same AOM type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-eiffel" data-lang="eiffel">c_value_conforms_to (other: like Current): Boolean
        -- True if this node expresses a value constraint that conforms to that of `other'
    local
        this_vset, other_vset: like value_set_expanded
    do
        if other.any_allowed then
            Result := True
        elseif is_valid_value_set_code (constraint) and is_valid_value_set_code (other.constraint) then
            -- firstly, check if the other value-set is empty, which means there is no value-set, i.e. no constraint
            -- which means that this object's value set automatically conforms.
            other_vset := other.value_set_expanded
            if not other_vset.is_empty then
                this_vset := value_set_expanded
                Result := codes_conformant (constraint, other.constraint) and then
                    across this_vset as vset_csr all other_vset.has (vset_csr.item) end
            else
                Result := True
            end
        else
            Result := codes_conformant (constraint, other.constraint)
        end
    end

c_value_congruent_to (other: like Current): Boolean
        -- True if this node's value constraint is the same as that of `other'
    local
        this_vset, other_vset: like value_set_expanded
    do
        if is_valid_value_set_code (constraint) and is_valid_value_set_code (other.constraint) then
            this_vset := value_set_expanded
            other_vset := other.value_set_expanded
            Result := constraint.is_equal (other.constraint) and then
                this_vset.count = other_vset.count and then
                    across this_vset as vset_csr all other_vset.has (vset_csr.item) end
        else
            Result := constraint.is_equal (other.constraint)
        end
    end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_c_second_order_class"><a class="anchor" href="#_c_second_order_class"></a><a class="link" href="#_c_second_order_class">C_SECOND_ORDER Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>C_SECOND_ORDER (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of classes defining second order constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_archetype_constraint_class">ARCHETYPE_CONSTRAINT</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Members of this second order constrainer. Normally redefined in descendants.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code>,<br>
rmcc: <code><a href="/releases/BASE/latest/foundation_types.html#_function_class">FUNCTION<sup></a>&lt;&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class">String</sup></a>,<a href="/releases/BASE/latest/foundation_types.html#_string_class">String<sup></a>&gt;,<a href="/releases/BASE/latest/foundation_types.html#_boolean_class">Boolean</sup></a>&gt;[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. Typically used during validation of specialised archetype nodes.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>rmcc</em></code>
</td>
<td class="hdlist2">
<p>RM conformance checker - a lambda (i.e. function object) that can compute conformance of type-names within the  Reference Model on which the current archetype is based. The signature provides two arguments representing respectively, the <code><em>rm_type_name</em></code> of the current node and the <code><em>rm_type_name</em></code> of the node being redefined in a specialisation parent archetype.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other. Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_primitive_tuple_class"><a class="anchor" href="#_c_primitive_tuple_class"></a><a class="link" href="#_c_primitive_tuple_class">C_PRIMITIVE_TUPLE Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_PRIMITIVE_TUPLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Class representing a single object tuple instance in a tuple constraint. Each such instance is a vector of object constraints, where each member (each <code>C_PRIMITIVE_OBJECT</code>) corresponds to one of the <code>C_ATTRIBUTEs</code> referred to by the owning <code>C_ATTRIBUTE_TUPLE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_second_order_class">C_SECOND_ORDER</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_primitive_object_class">C_PRIMITIVE_OBJECT</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Object constraint members of this tuple group.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. Typically used during validation of specialised archetype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other. Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_c_attribute_tuple_class"><a class="anchor" href="#_c_attribute_tuple_class"></a><a class="link" href="#_c_attribute_tuple_class">C_ATTRIBUTE_TUPLE Class</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>C_ATTRIBUTE_TUPLE</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Object representing a constraint on an atttribute tuple, i.e. a group of attributes that are constrained together. Typically used for representing co-varying constraints like {units, range} constraints.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_c_second_order_class">C_SECOND_ORDER</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>tuples</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_primitive_tuple_class">C_PRIMITIVE_TUPLE</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tuple definitions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>members</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_list_class" target="_blank" rel="noopener">List</a>&lt;<a href="#_c_attribute_class">C_ATTRIBUTE</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of <code>C_ATTRIBUTEs</code> forming the definition of the tuple.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_conforms_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node, ignoring any sub-parts, are narrower or the same as other. Typically used during validation of specialised archetype nodes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>c_congruent_to</strong> (<br>
other: <code><a href="#_c_second_order_class">C_SECOND_ORDER</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if constraints represented by this node contain no further redefinitions with respect to the node other. Typically used to test if an inherited node locally contains any constraints.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../archetype_package/">The Archetype Package</a></span>
  <span class="next"><a href="../rules_package/">The Rules Package</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright:  2003+
    <a href="https://www.openehr.org"
        alt="is an independent, non-profit foundation, facilitating the sharing of health
           records by consumers and clinicians via open specifications, clinical models
           and open platform implementations.">The openEHR Foundation</a>
  </p>

  <p>
    License:
    <img src="/ui/img/cc-by-nd-88x31.png"
        alt="Creative Commons Attribution-NoDerivs 3.0 Unported."
        style="vertical-align:middle;margin:0 0.25rem 0 0;">
    <a href="https://creativecommons.org/licenses/by-nd/3.0/">
      Creative Commons Attribution-NoDerivs 3.0 Unported.
    </a>
  </p>

  <p>
    <strong>Links: <strong>
    <a href="https://www.openehr.org/terms-of-use" class="mr-1">Terms of use</a> |
    <a href="https://www.openehr.org/privacy-policy" class="mx-1">Privacy policy</a> |
    <a href="https://www.openehr.org/privacy-policy" class="mx-1">Logos &amp; Trademarks</a> |
    <a href="https://www.openehr.org/contact-us" class="mx-1">Contact</a>
  </p>
</footer>

<script id="site-script" src="../../../../ui/js/site.js" data-ui-root-path="../../../../ui"></script>
<script async src="../../../../ui/js/vendor/highlight.js"></script>
<script src="../../../../ui/js/vendor/lunr.js"></script>
<script src="../../../../ui/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="80" data-stylesheet="../../../../ui/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../ui/js/medium-zoom.min.js"></script>
<script src="../../../../ui/js/zoom.js"></script>
  </body>
</html>
