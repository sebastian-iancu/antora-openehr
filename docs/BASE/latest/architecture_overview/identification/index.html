<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <title>Identification :: openEHR Specifications (Local Build)</title>
    <link rel="canonical" href="https://sebastian-iancu.github.io/antora-openehr/BASE/latest/architecture_overview/identification/">
    <link rel="prev" href="../versioning/">
    <link rel="next" href="../archetypes/">
    <meta name="description" content="openEHR Architecture Overview">
    <meta name="keywords" content="EHR, openehr, architecture">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../../ui/css/site.css">
    <link rel="stylesheet" href="../../../../ui/css/antora-openehr.css">
    <link rel="stylesheet" href="../../../../ui/css/openehr.css">
<link rel="icon" href="../../../../ui/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://sebastian-iancu.github.io/antora-openehr">openEHR Specifications (Local Build)</a>

      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field has-filter">
          <input id="search-input" type="text" placeholder="Search the docs">
          <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:BASE"> Base Model only
          </label>
        </div>
      </div>

      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Specifications</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://specifications.openehr.org/" target="_blank">
              openEHR specification
            </a>
            <a class="navbar-item" href="https://specifications.openehr.org/releases/UML/development/index.html" target="_blank">
              openEHR portal
            </a>
            <a class="navbar-item" href="https://ckm.openehr.org/ckm/" target="_blank">
              openEHR CKM
            </a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">Community</a>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://openehr.atlassian.net/secure/Dashboard.jspa?selectPageId=10190" target="_blank">
              Issue trackers
            </a>
            <a class="navbar-item" href="https://discourse.openehr.org/" target="_blank">
              Discourse Forum
            </a>
            <a class="navbar-item" href="https://specifications.openehr.org/wiki/display/spec/Specifications+Home" target="_blank">
              Wiki
            </a>
            <a class="navbar-item" href="https://github.com/openEHR" target="_blank">
              GitHub
            </a>
          </div>
        </div>

      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="BASE" data-version="Release-1.2.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../">Base Model</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../">Architecture Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../aims/">Aims of the openEHR Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../design_principles/">Design Principles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../package_structure/">openEHR Specification Structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../design_of_the_ehr/">Design of the openEHR EHR</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/">Security and Confidentiality</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../versioning/">Versioning</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="./">Identification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../archetypes/">Archetypes and Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../paths/">Paths and Locators</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../terminology/">Terminology in openEHR</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../deployment/">Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integration/">Integrating openEHR with other Systems</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../standards/">Relationship to Standards</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../implementation/">Implementation Technology Specifications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../base_types/">Base Types</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/definitions_package/">Definitions Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/builtins_package/">Builtins Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/identification_package/">Identification Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../base_types/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../foundation_types/">Foundation Types</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/overview/">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/primitive_types/">Primitive Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/structure_types/">Structure Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/interval/">Interval</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/time_types/">Time Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/terminology/">Terminology Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/functional/">Functional Meta-types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/type_cross_ref/">Type Cross-Reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../foundation_types/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../resource/">Resource Model</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../resource/preface/">Preface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../resource/resource_package/">Resource Package</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../resource/amendment_record/">Amendment Record</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Base Model</span>
    <span class="version">Release-1.2.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../../../AM/latest/">Archetype Model</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../AM/latest/">Release-2.3.0</a>
        </li>
        <li class="version">
          <a href="../../../../AM/Release-2.2.0/">Release-2.2.0</a>
        </li>
        <li class="version">
          <a href="../../../../AM/development/">development</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../../">Base Model</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../">Release-1.2.0</a>
        </li>
        <li class="version">
          <a href="../../../Release-1.1.0/">Release-1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../development/">development</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../../RM/latest/">Reference Model</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../RM/latest/">Release-1.1.0</a>
        </li>
        <li class="version">
          <a href="../../../../RM/Release-1.0.4/">Release-1.0.4</a>
        </li>
        <li class="version">
          <a href="../../../../RM/development/">development</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../">Base Model</a></li>
    <li><a href="../">Architecture Overview</a></li>
    <li><a href="./">Identification</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">Release-1.2.0</button>
  <div class="version-menu">
    <a class="version is-current" href="./">Release-1.2.0</a>
    <a class="version" href="../../../Release-1.1.0/architecture_overview/identification/">Release-1.1.0</a>
    <a class="version" href="../../../development/architecture_overview/identification/">development</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Identification</h1>
<div class="sect1">
<h2 id="_identification_of_the_ehr"><a class="anchor" href="#_identification_of_the_ehr"></a><a class="link" href="#_identification_of_the_ehr">Identification of the EHR</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an openEHR system, each EHR has a unique identifier, known as the EHR id, found in the root
EHR object of each EHR. EHR ids should be "strong" globally unique identifiers such as reliably created
Oids or Guids. <strong>No single system should contain two EHRs for the same subject.</strong> If this is not
the case, it means that the EHR system has failed to detect the existence of an EHR for a subject, or
failed to match provided demographic attributes to the subject.</p>
</div>
<div class="paragraph">
<p>In a distributed environment, the correspondence of EHR ids to subjects (i.e. patients) is variable, and
depends on the level of integration of the environment. In non-integrated or sporadically connected
environments, the same patient is likely to have a separate EHR at each institution, each with its own
unique EHR id, but the same subject id. If copies of parts of the patient EHR at one location is
requested by another provider, the received items will be merged into the local EHR for that patient.
Merges of persistent Compositions in such circumstances are likely to require human intervention.
Multiple EHR ids per patient in a distributed context are evidence of a lack of systematic connectivity
or identification service.</p>
</div>
<div class="paragraph">
<p>In a fully integrated distributed environment, the typical patient will still have local EHRs in multiple
locations, but each carrying the same EHR id. When a patient presents in a new location, a request to
the environment’s identification service could be made to determine if there is already an EHR for
this patient. If there is, a clone of all or part of the existing EHR could be made, or a new empty EHR
could be created, but in all cases, the EHR id would be the same as that used in other locations for the
same patient.</p>
</div>
<div class="paragraph">
<p>Note that the above logic only holds where the EHR in each location is an openEHR EHR.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_identification_of_items_within_the_ehr"><a class="anchor" href="#_identification_of_items_within_the_ehr"></a><a class="link" href="#_identification_of_items_within_the_ehr">Identification of Items within the EHR</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_scheme"><a class="anchor" href="#_general_scheme"></a><a class="link" href="#_general_scheme">General Scheme</a></h3>
<div class="paragraph">
<p>While identification of EHRs is not completely definable by openEHR, the identification of items
within an EHR is fully defined. The scheme described here requires two kinds of "identifier": identifiers
proper and references, or locators. An identifier is a unique (within some context) symbol or
number given to an object, and usually written into the object, whereas a reference is the use of an
identifier by an exterior object, to refer to the object containing the identifier in question. This distinction
is the same as that between primary and foreign keys in a relational database system.</p>
</div>
<div class="paragraph">
<p>In the openEHR RM, identifiers and references are implemented with two groups of classes defined
in the <code>support.identification</code> package. Identifiers of various kinds are defined by descendant
classes of <code>OBJECT_ID</code>, while references are defined by the classes inheriting from <code>OBJECT_REF</code>. The
distinction is illustrated in the following figure. Here we see two container objects with <code>OBJECT_IDs</code> (since
<code>OBJECT_ID</code> is an abstract type, the actual type will be another <code>XXX_ID</code> class), and various
<code>OBJECT_REFs</code> as references.</p>
</div>
<div id="ids_and_references" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/ids_and_references.png" alt="ids and references" width="50%">
</div>
<div class="title">Figure 1. XXX_IDs and XXX_REFs</div>
</div>
</div>
<div class="sect2">
<h3 id="_levels_of_identification"><a class="anchor" href="#_levels_of_identification"></a><a class="link" href="#_levels_of_identification">Levels of Identification</a></h3>
<div class="paragraph">
<p>In order to make data items locatable from the outside, identification is supported at 3 levels in
openEHR, as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>version containers</em>: <code>VERSIONED_OBJECTs</code> (Common IM) are identified uniquely;</p>
</li>
<li>
<p><em>top-level content structures</em>: content structures such as <code>COMPOSITION</code>, <code>EHR_STATUS</code>, <code>EHR_ACCESS</code>, <code>PARTY</code> etc. are uniquely identified by the association of the identifier of their containing <code>VERSIONED_OBJECT</code> and the identifier of their containing <code>VERSION</code> within the container;</p>
</li>
<li>
<p><em>internal nodes</em>: nodes within top-level structures are identified using paths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Three kinds of identification are used respectively. For version containers, meaningless unique identifiers (UIDs) are used. In most cases, the type <code>HIER_OBJECT_ID</code> will be used, which contains an instance of a subtype of the <code>UID</code> class, i.e. either an ISO OID or a UUID (<a href="https://tools.ietf.org/html/rfc4122" target="_blank" rel="noopener">IETF RFC4122</a>; also known as a GUID). UUIDs are strongly preferred in openEHR since they require no central assignment and can be generated on the spot. A versioned container can be then referenced with an <code>OBJECT_REF</code> containing its identifier.</p>
</div>
<div class="paragraph">
<p>Versions of top-level structures (i.e. objects of type  <code>VERSION&lt;X&gt;</code>, such as <code>VERSION&lt;COMPOSITION&gt;</code>) are identified in a way that is guaranteed to work even in distributed environments where copying, merging and subsequent modification occur. The full identification of a Version is the globally unique tuple consisting of the <code><em>uid</em></code> of the owning <code>VERSIONED_OBJECT</code>, and the two <code>VERSION</code> attributes <code><em>creating_system_id</em></code> and <code><em>version_tree_id</em></code>. The
<code><em>creating_system_id</em></code> attribute carries a unique identifier for the system where the content was first created; this may be a GUID, Oid or reverse internet identifier. The <code><em>version_tree_id</em></code> is a 1 or 3-part number string, such as <code>"1"</code> or for a branch, <code>"1.2.1"</code>. A typical version identification tuple is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>F7C5C7B7-75DB-4b39-9A1E-C0BA9BFDBDEC    -- id of VERSIONED_COMPOSITION
au.gov.health.rdh.ehr1                  -- id of creating system
2                                       -- current version</code></pre>
</div>
</div>
<div class="paragraph">
<p>This 3-part tuple is known as a <em>version locator</em> and is defined by the class <code>OBJECT_VERSION_ID</code> in the <a href="https://specifications.openehr.org/releases/BASE/latest/base_types.html#_identification_package" target="_blank" rel="noopener"><code>identification</code> package section of the Base Types specification</a>. The openEHR version identification scheme is described in detail in the <a href="https://specifications.openehr.org/releases/RM/latest/common.html#_change_control_package" target="_blank" rel="noopener"><code>change_control</code> package section of the Common IM</a>.</p>
</div>
<div class="paragraph">
<p>The contained top-level content item (i.e. a <code>COMPOSITION</code> etc) also has a <code><em>uid</em></code> attribute (inherited from <code>LOCATABLE</code>), and it is strongly recommended that this be populated with a copy of the <code>OBJECT_VERSION_ID</code> from the containing <code>VERSION&lt;X&gt;</code> object. This facilitates identifying versions from a naked content object e.g. returned in a query.</p>
</div>
<div class="paragraph">
<p>A <code>VERSION</code> can be <em>referred to</em> using a normal <code>OBJECT_REF</code> that contains a copy of the version&#8217;s <code>OBJECT_VERSION_ID</code>.</p>
</div>
<div class="paragraph">
<p>The last component of identification is the <em>path</em>, used to refer to an interior node of a top-level structure of some type <code>X</code> (e.g. <code>COMPOSITION</code>, <code>PARTY</code>, etc), the latter identified by its Version locator. Paths in openEHR follow an Xpath style syntax, with slight abbreviations to shorten paths in the most common cases. Paths are described in detail below.</p>
</div>
<div class="paragraph">
<p>To refer to an interior data node from outside a top-level structure, a combination of a  version locator
and a path is required. This is formalised by the <code>LOCATABLE_REF</code> class, also in the <a href="https://specifications.openehr.org/releases/BASE/latest/base_types.html#_identification_package" target="_blank" rel="noopener"><code>identification</code>
package section of the Base Types specification</a>. A Universal Resource Identifier (URI) form can also be used,
defined by the <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html#_uri_package" target="_blank" rel="noopener">data type <code>DV_EHR_URI</code></a>. This type provides a single string expression
in the scheme-space <code>ehr:</code> which can be used to refer to an interior data node from anywhere. (It can
also be used to represent queries; see below). Any <code>LOCATABLE_REF</code> can be converted to a
<code>DV_EHR_URI</code>, although not all <code>DV_EHR_URIs</code> are <code>LOCATABLE_REFs</code>.</p>
</div>
<div class="paragraph">
<p>The figure below summarises how various types of <code>OBJECT_ID</code> and <code>OBJECT_REF</code> are used to identify
objects, and to reference them from the outside, respectively.</p>
</div>
<div id="object_referencing" class="imageblock text-center text-center">
<div class="content">
<img src="../_images/diagrams/object_referencing.svg" alt="object referencing">
</div>
<div class="title">Figure 2. How to reference various levels of object</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../versioning/">Versioning</a></span>
  <span class="next"><a href="../archetypes/">Archetypes and Templates</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright: © 2003+
    <a href="https://www.openehr.org"
        alt="is an independent, non-profit foundation, facilitating the sharing of health
           records by consumers and clinicians via open specifications, clinical models
           and open platform implementations.">The openEHR Foundation</a>
  </p>

  <p>
    License:
    <img src="../../../../ui/img/cc-by-nd-88x31.png"
        alt="Creative Commons Attribution-NoDerivs 3.0 Unported."
        style="vertical-align:middle;margin:0 0.25rem 0 0;">
    <a href="https://creativecommons.org/licenses/by-nd/3.0/">
      Creative Commons Attribution-NoDerivs 3.0 Unported.
    </a>
  </p>

  <p>
    <strong>Links: <strong>
    <a href="https://www.openehr.org/terms-of-use" class="mr-1">Terms of use</a> |
    <a href="https://www.openehr.org/privacy-policy" class="mx-1">Privacy policy</a> |
    <a href="https://www.openehr.org/privacy-policy" class="mx-1">Logos &amp; Trademarks</a> |
    <a href="https://www.openehr.org/contact-us" class="mx-1">Contact</a>
  </p>
</footer>

<script id="site-script" src="../../../../ui/js/site.js" data-ui-root-path="../../../../ui"></script>
<script async src="../../../../ui/js/vendor/highlight.js"></script>
<script src="../../../../ui/js/vendor/lunr.js"></script>
<script src="../../../../ui/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="80" data-stylesheet="../../../../ui/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../ui/js/medium-zoom.min.js"></script>
<script src="../../../../ui/js/zoom.js"></script>
  </body>
</html>
